{"version":3,"file":"GraphicsLayerView3D.ece54497.js","sources":["../../node_modules/@arcgis/core/views/3d/layers/GraphicsLayerView3D.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as i}from\"../../../chunks/tslib.es6.js\";import{isSome as s}from\"../../../core/maybe.js\";import{whenTrueOnce as e,init as t,watch as r}from\"../../../core/watchUtils.js\";import{property as a}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as p}from\"../../../core/accessorSupport/decorators/subclass.js\";import{LayerView3D as h}from\"./LayerView3D.js\";import n from\"./graphics/Graphics3DFrustumVisibility.js\";import o from\"./graphics/Graphics3DGraphicLikeLayerView.js\";import{enlargeExtent as c}from\"./graphics/graphicUtils.js\";import{toViewIfLocal as d}from\"./support/projectExtentUtils.js\";import u from\"../../layers/LayerView.js\";const l=1.2;let g=class extends(h(u)){constructor(){super(...arguments),this.type=\"graphics-3d\",this.frustumVisibility=new n,this.slicePlaneEnabled=!1,this.drapeSourceType=1,this.suspendResumeExtent=null,this.fullExtentInLocalViewSpatialReference=null}initialize(){this._set(\"graphics3d\",new o({owner:this,layer:this.layer,scaleVisibilityEnabled:!0})),this.graphics3d.setup(),this.frustumVisibility.setup(this),this.setupSuspendResumeExtent(),this.updatingHandles.add(this,\"fullOpacity\",(()=>this.graphics3d.graphicsCore.opacityChange())),this.handles.add(this.layer.on(\"graphic-update\",(i=>this.graphics3d.graphicsCore.graphicUpdateHandler(i)))),this.addResolvingPromise(d(this).then((i=>this.fullExtentInLocalViewSpatialReference=i))),this.layer.internal?this.notifyChange(\"updating\"):this.handles.add(e(this.view,\"basemapTerrain.ready\",(()=>this.notifyChange(\"updating\"))))}destroy(){this.frustumVisibility&&(this.frustumVisibility.destroy(),this._set(\"frustumVisibility\",null)),this.graphics3d&&(this.graphics3d.destroy(),this._set(\"graphics3d\",null))}get legendEnabled(){return this.canResume()&&!this.frustumVisibility.suspended}get suspendInfo(){var i;const e={};return s(this.graphics3d.scaleVisibility)&&this.graphics3d.scaleVisibility.suspended&&(e.outsideScaleRange=!0),e.outsideOfView=!(null==(i=this.frustumVisibility)||!i.suspended),e}async fetchPopupFeatures(i,e){return s(e)?e.clientGraphics:null}notifyGraphicGeometryChanged(i){this.graphics3d.graphicsCore.notifyGraphicGeometryChanged(i)}notifyGraphicVisibilityChanged(i){this.graphics3d.graphicsCore.notifyGraphicVisibilityChanged(i)}get graphics3DGraphics(){return this.graphics3d.graphicsCore.graphics3DGraphics}get graphics3DGraphicsByObjectID(){return this.graphics3d?this.graphics3d.graphicsCore.graphics3DGraphicsByObjectID:null}get symbolUpdateType(){return this.graphics3d.graphicsCore.symbolUpdateType}getGraphicFromGraphicUid(i){return this.graphics3d.getGraphicFromGraphicUid(i)}whenGraphicBounds(i,s){return this.graphics3d.whenGraphicBounds(i,s)}computeAttachmentOrigin(i,s){return this.graphics3d?this.graphics3d.graphicsCore.computeAttachmentOrigin(i,s):null}getSymbolLayerSize(i,s){return this.graphics3d.getSymbolLayerSize(i,s)}queryGraphics(){return Promise.resolve(this.loadedGraphics)}maskOccludee(i){return this.graphics3d.maskOccludee(i)}highlight(i){return this.graphics3d.highlight(i)}get updatePolicy(){var i;return(null==(i=this.graphics3d)?void 0:i.graphicsCore.effectiveUpdatePolicy)||1}canResume(){var i;return super.canResume()&&!(null!=(i=this.graphics3d)&&i.suspended)}isUpdating(){var i,s;return!(!(this.graphics3d&&this.graphics3d.updating||this.frustumVisibility&&this.frustumVisibility.updating)&&(this.layer.internal||null!=(i=this.view)&&null!=(s=i.basemapTerrain)&&s.ready))}setupSuspendResumeExtent(){const i=()=>{this.suspendResumeExtent=c(this.graphics3d.graphicsCore.computedExtent,this.suspendResumeExtent,l,this.graphics3d.graphicsCore.extentPadding),this.frustumVisibility.setExtent(this.suspendResumeExtent)};t(this.graphics3d.graphicsCore,\"computedExtent\",(()=>i()),!0),r(this.graphics3d.graphicsCore,\"extentPadding\",(()=>i()),!0)}get performanceInfo(){return{displayedNumberOfFeatures:this.loadedGraphics.length,maximumNumberOfFeatures:-1,totalNumberOfFeatures:-1,nodes:0,core:null,updating:this.updating,elevationUpdating:this.graphics3d.elevationAlignment.updating,visibilityFrustum:!this.frustumVisibility.suspended}}};i([a({aliasOf:\"layer.graphics\"})],g.prototype,\"loadedGraphics\",void 0),i([a({readOnly:!0})],g.prototype,\"suspended\",void 0),i([a({readOnly:!0})],g.prototype,\"legendEnabled\",null),i([a({readOnly:!0})],g.prototype,\"updating\",void 0),i([a()],g.prototype,\"layer\",void 0),i([a({readOnly:!0})],g.prototype,\"frustumVisibility\",void 0),i([a({readOnly:!0})],g.prototype,\"graphics3d\",void 0),i([a({type:Boolean})],g.prototype,\"slicePlaneEnabled\",void 0),i([a({readOnly:!0})],g.prototype,\"suspendInfo\",null),g=i([p(\"esri.views.3d.layers.GraphicsLayerView3D\")],g);const y=g;export{y as default};\n"],"names":["h","n","o","d","e","s","i","c","t","r","a","p"],"mappings":"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"}