{"version":3,"file":"simpleScene.3bab7589.js","sources":["../../src/components/simpleScene.vue"],"sourcesContent":["<template>\n  <div id=\"sceneContainer\" ref=\"sceneContainer\"></div>\n</template>\n\n<script setup>\nimport Base3D from \"../utils/base3D\";\nimport threeUniversal from \"../utils/threeUniversal\";\nimport { reactive, ref, onMounted } from \"vue\";\nimport * as THREE from \"three\";\nlet data = reactive({\n  base3D: {},\n});\nconst sceneContainer = ref(null);\nonMounted(() => {\n  initScene();\n});\nlet labels3d = [\n  { x: -106, y: 4, z: 211, name: \"一期沉沙池\" },\n  { x: -106, y: 4, z: 148, name: \"二期沉沙池\" },\n  { x: -106, y: 4, z: 178, name: \"三期沉沙池\" },\n  { x: -292, y: 4, z: 58, name: \"一期反应池\" },\n  { x: -367, y: 4, z: 58, name: \"一期沉淀池\" },\n  { x: -167, y: 4, z: 58, name: \"一期沉淀池\" },\n  { x: -197, y: 4, z: 237, name: \"一二期消毒池\" },\n  { x: -430, y: 4, z: -140, name: \"三期生化池\" },\n  { x: -246, y: 4, z: -140, name: \"二期反应池\" },\n  { x: -478, y: 4, z: 60, name: \"三期二沉池\" },\n  { x: -474, y: 4, z: 205, name: \"三期消毒池\" },\n  { x: -48, y: 4, z: 245, name: \"一二三期提升泵房\" },\n  { x: 25, y: 4, z: 174, name: \"污泥大转盘\" },\n  { x: -48, y: 4, z: 100, name: \"四期提升泵房\" },\n  { x: 49, y: 4, z: 100, name: \"四期沉沙池\" },\n  { x: 106, y: 4, z: 0, name: \"四期生化池\" },\n  { x: 106, y: 4, z: -100, name: \"四期二沉池\" },\n  { x: 234, y: 4, z: -150, name: \"高效沉淀池\" },\n  { x: 60, y: 4, z: -167, name: \"转盘滤池\" },\n  { x: -30, y: 4, z: -170, name: \"紫外消毒池\" },\n];\nlet spriteGroup = new THREE.Group();\nspriteGroup.name = \"labels_2d\";\nfunction initScene() {\n  data.base3D = new Base3D(sceneContainer.value);\n  threeUniversal.addFloor(data.base3D.scene);\n  loadLabels();\n}\n\nfunction loadLabels() {\n  labels3d.map((item) => spriteImg(item));\n}\n\nfunction spriteImg(labels_D) {\n  let { x, y, z } = labels_D;\n  let texture = new THREE.ImageUtils.loadTexture(\"images/label.png\");\n  texture.needsUpdate = true;\n  texture.wrapS = THREE.RepeatWrapping;\n  texture.wrapT = THREE.RepeatWrapping;\n  let material = new THREE.SpriteMaterial({\n    map: texture,\n    useScreenCoordinates: false,\n    // alignment: THREE.SpriteAlignment.center,\n    transparent: true,\n  });\n  let sprite = new THREE.Sprite(material);\n  sprite.scale.set(10, 10, 10);\n  sprite.position.set(x, y, z);\n  spriteGroup.add(sprite);\n  spriteText(labels_D);\n}\nfunction spriteText(labels_D) {\n  let { x, y, z, name } = labels_D;\n  let c_width = 200,\n    c_hight = 140;\n  let canvas = document.createElement(\"canvas\");\n  let ctx = canvas.getContext(\"2d\");\n  canvas.width = c_width;\n  canvas.height = c_hight;\n  //制作矩形\n  ctx.fillStyle = \"rgba(98,75,14,1)\";\n  ctx.fillRect(0, 0, c_width, c_hight * 0.22);\n  ctx.fillStyle = \"#FFDD77\";\n  ctx.font = 24 + 'px \"sans-serif';\n  ctx.textAlign = \"center\"; // 设置水平对齐方式\n  ctx.textBaseline = \"middle\"; // 设置垂直对齐方式\n  ctx.fillText(name, c_width / 2, (c_hight * 0.23) / 2); // canvas  水平垂直居中\n  let texture = new THREE.Texture(canvas);\n  texture.needsUpdate = true;\n  let material = new THREE.SpriteMaterial({\n    map: texture,\n    useScreenCoordinates: false,\n    // alignment: THREE.SpriteAlignment.center,\n    transparent: true,\n  });\n  let sprite = new THREE.Sprite(material);\n  sprite.scale.set(10, 10, 10);\n  sprite.position.set(x, y, z);\n  spriteGroup.add(sprite);\n  data.base3D.scene.add(spriteGroup);\n}\n</script>\n\n<style scoped></style>\n"],"names":["THREE.Group","THREE.ImageUtils","THREE.RepeatWrapping","THREE.SpriteMaterial","THREE.Sprite","THREE.Texture"],"mappings":"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"}