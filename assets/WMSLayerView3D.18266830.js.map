{"version":3,"file":"WMSLayerView3D.18266830.js","sources":["../../node_modules/@arcgis/core/views/layers/WMSLayerView.js","../../node_modules/@arcgis/core/views/3d/layers/WMSLayerView3D.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import r from\"../../core/Error.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as o}from\"../../core/accessorSupport/decorators/subclass.js\";import{combinedViewLayerTimeExtentProperty as s}from\"../../layers/support/commonProperties.js\";import{ExportWMSImageParameters as p}from\"../../layers/support/ExportWMSImageParameters.js\";const a=a=>{let i=class extends a{initialize(){this.exportImageParameters=new p({layer:this.layer})}destroy(){this.exportImageParameters.destroy(),this.exportImageParameters=null}get exportImageVersion(){var e;return null==(e=this.exportImageParameters)||e.commitProperty(\"version\"),this.commitProperty(\"timeExtent\"),(this._get(\"exportImageVersion\")||0)+1}fetchPopupFeatures(e){const{layer:t}=this;if(!e)return Promise.reject(new r(\"wmslayerview:fetchPopupFeatures\",\"Nothing to fetch without area\",{layer:t}));const{popupEnabled:o}=t;if(!o)return Promise.reject(new r(\"wmslayerview:fetchPopupFeatures\",\"popupEnabled should be true\",{popupEnabled:o}));const s=this.createFetchPopupFeaturesQuery(e);if(!s)return Promise.resolve([]);const{extent:p,width:a,height:i,x:m,y:n}=s;if(!(p&&a&&i))throw new r(\"wmslayerview:fetchPopupFeatures\",\"WMSLayer does not support fetching features.\",{extent:p,width:a,height:i});const u=t.fetchFeatureInfo(p,a,i,m,n);return Promise.resolve(u?[u]:[])}};return e([t()],i.prototype,\"exportImageParameters\",void 0),e([t({readOnly:!0})],i.prototype,\"exportImageVersion\",null),e([t()],i.prototype,\"layer\",void 0),e([t(s)],i.prototype,\"timeExtent\",void 0),i=e([o(\"esri.layers.mixins.WMSLayerView\")],i),i};export{a as WMSLayerView,a as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Error.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";import i from\"../../../geometry/Extent.js\";import o from\"./DynamicLayerView3D.js\";import{WMSLayerView as a}from\"../../layers/WMSLayerView.js\";let p=class extends(a(o)){constructor(){super(...arguments),this.type=\"wms-3d\"}initialize(){this.layer.supportsSpatialReference(this.view.spatialReference)||this.addResolvingPromise(Promise.reject(new t(\"layerview:spatial-reference-incompatible\",\"The spatial references supported by this WMS layer are incompatible with the spatial reference of the view\"))),this.updatingHandles.add(this.exportImageParameters,\"version\",(()=>{this.updatingHandles.addPromise(this.refreshDebounced())}))}createFetchPopupFeaturesQuery(e){const t=this.findExtentInfoAt(e),r=t.extent,s=new i(r[0],r[1],r[2],r[3],this._spatialReference),o=t.imageSize,a=o.width,p=o.height,n=s.width/a;return{extent:s,width:a,height:p,x:Math.round((e.x-s.xmin)/n),y:Math.round((s.ymax-e.y)/n)}}getFetchOptions(){return{timeExtent:this.timeExtent}}};e([r()],p.prototype,\"suspended\",void 0),p=e([s(\"esri.views.3d.layers.WMSLayerView3D\")],p);const n=p;export{n as default};\n"],"names":["i","p","r","s","t","o"],"mappings":"0UAIkhB,KAAM,GAAE,GAAG,CAAC,GAAIA,GAAE,aAAc,EAAC,CAAC,YAAY,CAAC,KAAK,sBAAsB,GAAIC,GAAE,CAAC,MAAM,KAAK,QAAQ,SAAS,CAAC,KAAK,sBAAsB,UAAU,KAAK,sBAAsB,QAAS,qBAAoB,CAAC,GAAI,GAAE,MAAO,AAAO,GAAE,KAAK,wBAAd,MAAsC,EAAE,eAAe,WAAW,KAAK,eAAe,cAAe,MAAK,KAAK,uBAAuB,GAAG,EAAE,mBAAmB,EAAE,CAAC,KAAK,CAAC,MAAM,GAAG,KAAK,GAAG,CAAC,EAAE,MAAO,SAAQ,OAAO,GAAIC,GAAE,kCAAkC,gCAAgC,CAAC,MAAM,KAAK,KAAK,CAAC,aAAa,GAAG,EAAE,GAAG,CAAC,EAAE,MAAO,SAAQ,OAAO,GAAIA,GAAE,kCAAkC,8BAA8B,CAAC,aAAa,KAAK,KAAMC,GAAE,KAAK,8BAA8B,GAAG,GAAG,CAACA,EAAE,MAAO,SAAQ,QAAQ,IAAI,KAAK,CAAC,OAAO,EAAE,MAAM,EAAE,OAAO,EAAE,EAAE,EAAE,EAAE,GAAGA,EAAE,GAAG,CAAE,IAAG,GAAG,GAAG,KAAM,IAAID,GAAE,kCAAkC,+CAA+C,CAAC,OAAO,EAAE,MAAM,EAAE,OAAO,IAAI,KAAM,GAAE,EAAE,iBAAiB,EAAE,EAAE,EAAE,EAAE,GAAG,MAAO,SAAQ,QAAQ,EAAE,CAAC,GAAG,MAAM,MAAO,GAAE,CAACE,KAAKJ,EAAE,UAAU,wBAAwB,QAAQ,EAAE,CAACI,EAAE,CAAC,SAAS,MAAMJ,EAAE,UAAU,qBAAqB,MAAM,EAAE,CAACI,KAAKJ,EAAE,UAAU,QAAQ,QAAQ,EAAE,CAACI,EAAED,IAAIH,EAAE,UAAU,aAAa,QAAQA,EAAE,EAAE,CAACK,EAAE,oCAAoCL,GAAGA,GCAjuC,GAAI,GAAE,aAAc,GAAEK,EAAG,CAAC,aAAa,CAAC,MAAM,GAAG,WAAW,KAAK,KAAK,SAAS,YAAY,CAAC,KAAK,MAAM,yBAAyB,KAAK,KAAK,mBAAmB,KAAK,oBAAoB,QAAQ,OAAO,GAAID,GAAE,2CAA2C,gHAAgH,KAAK,gBAAgB,IAAI,KAAK,sBAAsB,UAAW,IAAI,CAAC,KAAK,gBAAgB,WAAW,KAAK,sBAAuB,8BAA8B,EAAE,CAAC,KAAM,GAAE,KAAK,iBAAiB,GAAG,EAAE,EAAE,OAAO,EAAE,GAAIJ,GAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,KAAK,mBAAmB,EAAE,EAAE,UAAU,EAAE,EAAE,MAAM,EAAE,EAAE,OAAO,EAAE,EAAE,MAAM,EAAE,MAAM,CAAC,OAAO,EAAE,MAAM,EAAE,OAAO,EAAE,EAAE,KAAK,MAAO,GAAE,EAAE,EAAE,MAAM,GAAG,EAAE,KAAK,MAAO,GAAE,KAAK,EAAE,GAAG,IAAI,iBAAiB,CAAC,MAAM,CAAC,WAAW,KAAK,cAAc,EAAE,CAACE,KAAK,EAAE,UAAU,YAAY,QAAQ,EAAE,EAAE,CAACC,EAAE,wCAAwC,GAAQ,KAAC,GAAE"}