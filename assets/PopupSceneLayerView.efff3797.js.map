{"version":3,"file":"PopupSceneLayerView.efff3797.js","sources":["../../node_modules/@arcgis/core/views/3d/layers/support/PopupSceneLayerView.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import r from\"../../../../core/Error.js\";import{isSome as s}from\"../../../../core/maybe.js\";import\"../../../../core/Logger.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/set.js\";import{subclass as t}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{unpackFieldNames as o,populateMissingFields as p}from\"../../../../layers/support/fieldUtils.js\";import{getFetchPopupTemplate as a,getRequiredFields as i}from\"../../../layers/support/popupUtils.js\";const c=c=>{let u=class extends c{_validateFetchPopupFeatures(e){const{layer:s}=this,{popupEnabled:t}=s;if(!t)return new r(\"scenelayerview3d:fetchPopupFeatures\",\"Popups are disabled\",{layer:s});return a(s,e)?void 0:new r(\"scenelayerview3d:fetchPopupFeatures\",\"Layer does not define a popup template\",{layer:s})}async prepareFetchPopupFeatures(e){}async fetchPopupFeatures(e,r){const t=this._validateFetchPopupFeatures(r);if(t)return Promise.reject(t);const c=s(r)?r.clientGraphics:null;if(!c||0===c.length)return Promise.resolve([]);const u=\"scene\"===this.layer.type&&s(this.layer.associatedLayer)?this.layer.associatedLayer:this.layer,n=o(this.layer.fieldsIndex,await i(u,a(this.layer,r)));await this.prepareFetchPopupFeatures(n);const l=new Set,h=[],y=[];for(const s of c)p(n,s,l)?y.push(s):h.push(s);return 0===y.length?Promise.resolve(h):this.whenGraphicAttributes(y,[...l]).catch((()=>y)).then((e=>h.concat(e)))}};return u=e([t(\"esri.views.3d.layers.support.PopupSceneLayerView\")],u),u};export{c as PopupSceneLayerView};\n"],"names":["s","a","r","t","o","i","p"],"mappings":"6IAIqoB,KAAC,GAAE,GAAG,CAAC,GAAI,GAAE,aAAc,EAAC,CAAC,4BAA4B,EAAE,CAAC,KAAK,CAAC,MAAMA,GAAG,KAAK,CAAC,aAAa,GAAGA,EAAE,MAAI,GAA6FC,EAAED,EAAE,GAAG,OAAO,GAAIE,GAAE,sCAAsC,yCAAyC,CAAC,MAAMF,IAA9L,GAAIE,GAAE,sCAAsC,sBAAsB,CAAC,MAAMF,SAA+H,2BAA0B,EAAE,OAAQ,oBAAmB,EAAEE,EAAE,CAAC,KAAMC,GAAE,KAAK,4BAA4BD,GAAG,GAAGC,EAAE,MAAO,SAAQ,OAAOA,GAAG,KAAM,GAAEH,EAAEE,GAAGA,EAAE,eAAe,KAAK,GAAG,CAAC,GAAG,AAAI,EAAE,SAAN,EAAa,MAAO,SAAQ,QAAQ,IAAI,KAAM,GAAE,AAAU,KAAK,MAAM,OAArB,SAA2BF,EAAE,KAAK,MAAM,iBAAiB,KAAK,MAAM,gBAAgB,KAAK,MAAM,EAAEI,EAAE,KAAK,MAAM,YAAY,KAAMC,GAAE,EAAEJ,EAAE,KAAK,MAAMC,KAAK,KAAM,MAAK,0BAA0B,GAAG,KAAM,GAAE,GAAI,KAAI,EAAE,GAAG,EAAE,GAAG,SAAU,KAAK,GAAEI,EAAE,EAAE,EAAE,GAAG,EAAE,KAAK,GAAG,EAAE,KAAK,GAAG,MAAO,AAAI,GAAE,SAAN,EAAa,QAAQ,QAAQ,GAAG,KAAK,sBAAsB,EAAE,CAAC,GAAG,IAAI,MAAO,IAAI,GAAI,KAAM,GAAG,EAAE,OAAO,MAAO,MAAO,GAAE,EAAE,CAACH,EAAE,qDAAqD,GAAG"}