import{D as f,J as P,v as u,m as l,dy as F,dz as m}from"./externalRenderers.e9b2a64d.js";import{d as h,t as w}from"./popupUtils.b610e8fc.js";const x=d=>{let a=class extends d{_validateFetchPopupFeatures(p){const{layer:e}=this,{popupEnabled:s}=e;return s?h(e,p)?void 0:new u("scenelayerview3d:fetchPopupFeatures","Layer does not define a popup template",{layer:e}):new u("scenelayerview3d:fetchPopupFeatures","Popups are disabled",{layer:e})}async prepareFetchPopupFeatures(p){}async fetchPopupFeatures(p,e){const s=this._validateFetchPopupFeatures(e);if(s)return Promise.reject(s);const i=l(e)?e.clientGraphics:null;if(!i||i.length===0)return Promise.resolve([]);const y=this.layer.type==="scene"&&l(this.layer.associatedLayer)?this.layer.associatedLayer:this.layer,n=F(this.layer.fieldsIndex,await w(y,h(this.layer,e)));await this.prepareFetchPopupFeatures(n);const c=new Set,o=[],r=[];for(const t of i)m(n,t,c)?r.push(t):o.push(t);return r.length===0?Promise.resolve(o):this.whenGraphicAttributes(r,[...c]).catch(()=>r).then(t=>o.concat(t))}};return a=f([P("esri.views.3d.layers.support.PopupSceneLayerView")],a),a};export{x as c};
//# sourceMappingURL=PopupSceneLayerView.efff3797.js.map
