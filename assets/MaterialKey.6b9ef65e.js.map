{"version":3,"file":"MaterialKey.6b9ef65e.js","sources":["../../node_modules/@arcgis/core/views/2d/engine/webgl/mesh/templates/meshUtils.js","../../node_modules/@arcgis/core/views/2d/engine/webgl/materialKey/MaterialKey.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nfunction e(e){switch(e){case\"above-along\":case\"below-along\":case\"center-along\":case\"esriServerLinePlacementAboveAlong\":case\"esriServerLinePlacementBelowAlong\":case\"esriServerLinePlacementCenterAlong\":return!0;default:return!1}}export{e as isMapAligned};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport t from\"../../../../../core/Error.js\";import{WGLVVFlag as e,WGLVVTarget as i,WGLGeometryType as s}from\"../enums.js\";import{isMapAligned as a}from\"../mesh/templates/meshUtils.js\";function r(t,s){const a=e.SIZE_FIELD_STOPS|e.SIZE_MINMAX_VALUE|e.SIZE_SCALE_STOPS|e.SIZE_UNIT_VALUE,r=(t&(i.FIELD_TARGETS_OUTLINE|i.MINMAX_TARGETS_OUTLINE|i.SCALE_TARGETS_OUTLINE|i.UNIT_TARGETS_OUTLINE))>>>4;return s.isOutline||s.isOutlinedFill?a&r:a&~r}const n=0,v=8,o=7,l=8,h=11,S=11,u=12,d=13,V=14,c=15,p=15,g=16,z=17,m=18,y=19,E=20,T=21,M=22;function L(t,e){switch(t){case s.FILL:return x.from(e);case s.LINE:return B.from(e);case s.MARKER:return U.from(e);case s.TEXT:return R.from(e);case s.LABEL:return b.from(e);default:throw new Error(`Unable to createMaterialKey for unknown geometryType ${t}`)}}function F(t){switch(_.load(t).geometryType){case s.MARKER:return new U(t);case s.FILL:return new x(t);case s.LINE:return new B(t);case s.TEXT:return new R(t);case s.LABEL:return new b(t)}}class _{constructor(t){this._data=0,this._data=t}static load(t){const e=this.shared;return e.data=t,e}set data(t){this._data=t}get data(){return this._data}get geometryType(){return this.bits(l,h)}set geometryType(t){this.setBits(t,l,h)}get mapAligned(){return!!this.bit(E)}set mapAligned(t){this.setBit(E,t)}get sdf(){return!!this.bit(S)}set sdf(t){this.setBit(S,t)}get pattern(){return!!this.bit(u)}set pattern(t){this.setBit(u,t)}get textureBinding(){return this.bits(n,v)}set textureBinding(t){this.setBits(t,n,v)}get geometryTypeString(){switch(this.geometryType){case s.FILL:return\"fill\";case s.MARKER:return\"marker\";case s.LINE:return\"line\";case s.TEXT:return\"text\";case s.LABEL:return\"label\";default:throw new t(`Unable to handle unknown geometryType: ${this.geometryType}`)}}setBit(t,e){const i=1<<t;e?this._data|=i:this._data&=~i}bit(t){return(this._data&1<<t)>>t}setBits(t,e,i){for(let s=e,a=0;s<i;s++,a++)this.setBit(s,0!=(t&1<<a))}bits(t,e){let i=0;for(let s=t,a=0;s<e;s++,a++)i|=this.bit(s)<<a;return i}hasVV(){return!1}setVV(t,e){}getVariation(){return{mapAligned:this.mapAligned,pattern:this.pattern,sdf:this.sdf}}getVariationHash(){return this._data&~(o&this.textureBinding)}}_.shared=new _(0);const I=t=>class extends t{get vvSizeMinMaxValue(){return 0!==this.bit(g)}set vvSizeMinMaxValue(t){this.setBit(g,t)}get vvSizeScaleStops(){return 0!==this.bit(z)}set vvSizeScaleStops(t){this.setBit(z,t)}get vvSizeFieldStops(){return 0!==this.bit(m)}set vvSizeFieldStops(t){this.setBit(m,t)}get vvSizeUnitValue(){return 0!==this.bit(y)}set vvSizeUnitValue(t){this.setBit(y,t)}hasVV(){return super.hasVV()||this.vvSizeMinMaxValue||this.vvSizeScaleStops||this.vvSizeFieldStops||this.vvSizeUnitValue}setVV(t,i){super.setVV(t,i);const s=r(t,i)&t;this.vvSizeMinMaxValue=!!(s&e.SIZE_MINMAX_VALUE),this.vvSizeFieldStops=!!(s&e.SIZE_FIELD_STOPS),this.vvSizeUnitValue=!!(s&e.SIZE_UNIT_VALUE),this.vvSizeScaleStops=!!(s&e.SIZE_SCALE_STOPS)}},O=t=>class extends t{get vvRotation(){return 0!==this.bit(c)}set vvRotation(t){this.setBit(c,t)}hasVV(){return super.hasVV()||this.vvRotation}setVV(t,i){super.setVV(t,i),this.vvRotation=!i.isOutline&&!!(t&e.ROTATION)}},A=t=>class extends t{get vvColor(){return 0!==this.bit(d)}set vvColor(t){this.setBit(d,t)}hasVV(){return super.hasVV()||this.vvColor}setVV(t,i){super.setVV(t,i),this.vvColor=!i.isOutline&&!!(t&e.COLOR)}},f=t=>class extends t{get vvOpacity(){return 0!==this.bit(V)}set vvOpacity(t){this.setBit(V,t)}hasVV(){return super.hasVV()||this.vvOpacity}setVV(t,i){super.setVV(t,i),this.vvOpacity=!i.isOutline&&!!(t&e.OPACITY)}};class x extends(A(f(I(_)))){static load(t){const e=this.shared;return e.data=t,e}static from(t){const e=this.load(0);return e.geometryType=s.FILL,e.dotDensity=\"dot-density\"===t.stride.fill,e.simple=\"simple\"===t.stride.fill,e.outlinedFill=t.isOutlinedFill,e.dotDensity||e.setVV(t.vvFlags,t),e.data}getVariation(){return{...super.getVariation(),dotDensity:this.dotDensity,outlinedFill:this.outlinedFill,simple:this.simple,vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}get dotDensity(){return!!this.bit(p)}set dotDensity(t){this.setBit(p,t)}get simple(){return!!this.bit(M)}set simple(t){this.setBit(M,t)}get outlinedFill(){return!!this.bit(T)}set outlinedFill(t){this.setBit(T,t)}}x.shared=new x(0);class U extends(A(f(O(I(_))))){static load(t){const e=this.shared;return e.data=t,e}static from(t){const e=this.load(0);return e.geometryType=s.MARKER,e.setVV(t.vvFlags,t),e.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvRotation:this.vvRotation,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}U.shared=new U(0);class B extends(A(f(I(_)))){static load(t){const e=this.shared;return e.data=t,e}static from(t){const e=this.load(0);return e.geometryType=s.LINE,e.setVV(t.vvFlags,t),e.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}B.shared=new B(0);class R extends(A(f(O(I(_))))){static load(t){const e=this.shared;return e.data=t,e}static from(t){const e=this.load(0);return e.geometryType=s.TEXT,e.setVV(t.vvFlags,t),e.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvRotation:this.vvRotation,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}R.shared=new R(0);class b extends(I(_)){static load(t){const e=this.shared;return e.data=t,e}static from(t){const e=this.load(0);return e.geometryType=s.LABEL,e.setVV(t.vvFlags,t),e.mapAligned=a(t.placement),e.data}getVariation(){return{...super.getVariation(),vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}b.shared=new b(0);export{x as FillMaterialKey,b as LabelMaterialKey,B as LineMaterialKey,U as MarkerMaterialKey,_ as MaterialKeyBase,R as TextMaterialKey,L as createMaterialKey,r as getSizeFlagsMask,F as hydrateMaterialKey};\n"],"names":["e","i","s","t","a"],"mappings":"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"}