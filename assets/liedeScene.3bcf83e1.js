import{reactive as E,ref as L,onMounted as F,onBeforeUnmount as G,watch as N,openBlock as U,createElementBlock as A,createElementVNode as w,withModifiers as z,unref as j,toDisplayString as R,createTextVNode as q}from"vue";import{B as V,G as $}from"./base3D.6463c8aa.js";import{t as Q}from"./threeUniversal.9ce15fef.js";import{p as W,ad as P,M as H,c as X,h as Y}from"./three.module.3b505d30.js";import"./dat.gui.module.7cb2f571.js";import{F as J}from"./FontLoader.7c810b15.js";import{T as K}from"./TextGeometry.d7612f96.js";import{_ as Z}from"./index.f0707c98.js";import"./OrbitControls.5e199169.js";import"./stats.module.0fc722e3.js";import"./vendor.c70270c6.js";Date.now===void 0&&(Date.now=function(){return new Date().valueOf()});var f=f||function(){var e=[];return{REVISION:"8",getAll:function(){return e},removeAll:function(){e=[]},add:function(n){e.push(n)},remove:function(n){var t=e.indexOf(n);t!==-1&&e.splice(t,1)},update:function(n){if(e.length===0)return!1;var t=0,r=e.length;for(n=n!==void 0?n:Date.now();t<r;)e[t].update(n)?t++:(e.splice(t,1),r--);return!0}}}();f.Tween=function(e){var n=e,t={},r={},a=1e3,s=0,c=null,h=f.Easing.Linear.None,p=f.Interpolation.Linear,O=[],_=null,x=!1,b=null,y=null;this.to=function(u,l){return l!==void 0&&(a=l),r=u,this},this.start=function(u){f.add(this),x=!1,c=u!==void 0?u:Date.now(),c+=s;for(var l in r)if(!(n[l]===null||!(l in n))){if(r[l]instanceof Array){if(r[l].length===0)continue;r[l]=[n[l]].concat(r[l])}t[l]=n[l]}return this},this.stop=function(){return f.remove(this),this},this.delay=function(u){return s=u,this},this.easing=function(u){return h=u,this},this.interpolation=function(u){return p=u,this},this.chain=function(){return O=arguments,this},this.onStart=function(u){return _=u,this},this.onUpdate=function(u){return b=u,this},this.onComplete=function(u){return y=u,this},this.update=function(u){if(u<c)return!0;x===!1&&(_!==null&&_.call(n),x=!0);var l=(u-c)/a;l=l>1?1:l;var g=h(l);for(var I in t){var M=t[I],C=r[I];C instanceof Array?n[I]=p(C,g):n[I]=M+(C-M)*g}if(b!==null&&b.call(n,g),l==1){y!==null&&y.call(n);for(var o=0,i=O.length;o<i;o++)O[o].start(u);return!1}return!0}};f.Easing={Linear:{None:function(e){return e}},Quadratic:{In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}},Cubic:{In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}},Quartic:{In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}},Quintic:{In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}},Sinusoidal:{In:function(e){return 1-Math.cos(e*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return .5*(1-Math.cos(Math.PI*e))}},Exponential:{In:function(e){return e===0?0:Math.pow(1024,e-1)},Out:function(e){return e===1?1:1-Math.pow(2,-10*e)},InOut:function(e){return e===0?0:e===1?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(-Math.pow(2,-10*(e-1))+2)}},Circular:{In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}},Elastic:{In:function(e){var n,t=.1,r=.4;return e===0?0:e===1?1:(!t||t<1?(t=1,n=r/4):n=r*Math.asin(1/t)/(2*Math.PI),-(t*Math.pow(2,10*(e-=1))*Math.sin((e-n)*(2*Math.PI)/r)))},Out:function(e){var n,t=.1,r=.4;return e===0?0:e===1?1:(!t||t<1?(t=1,n=r/4):n=r*Math.asin(1/t)/(2*Math.PI),t*Math.pow(2,-10*e)*Math.sin((e-n)*(2*Math.PI)/r)+1)},InOut:function(e){var n,t=.1,r=.4;return e===0?0:e===1?1:(!t||t<1?(t=1,n=r/4):n=r*Math.asin(1/t)/(2*Math.PI),(e*=2)<1?-.5*(t*Math.pow(2,10*(e-=1))*Math.sin((e-n)*(2*Math.PI)/r)):t*Math.pow(2,-10*(e-=1))*Math.sin((e-n)*(2*Math.PI)/r)*.5+1)}},Back:{In:function(e){var n=1.70158;return e*e*((n+1)*e-n)},Out:function(e){var n=1.70158;return--e*e*((n+1)*e+n)+1},InOut:function(e){var n=1.70158*1.525;return(e*=2)<1?.5*(e*e*((n+1)*e-n)):.5*((e-=2)*e*((n+1)*e+n)+2)}},Bounce:{In:function(e){return 1-f.Easing.Bounce.Out(1-e)},Out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return e<.5?f.Easing.Bounce.In(e*2)*.5:f.Easing.Bounce.Out(e*2-1)*.5+.5}}};f.Interpolation={Linear:function(e,n){var t=e.length-1,r=t*n,a=Math.floor(r),s=f.Interpolation.Utils.Linear;return n<0?s(e[0],e[1],r):n>1?s(e[t],e[t-1],t-r):s(e[a],e[a+1>t?t:a+1],r-a)},Bezier:function(e,n){var t=0,r=e.length-1,a=Math.pow,s=f.Interpolation.Utils.Bernstein,c;for(c=0;c<=r;c++)t+=a(1-n,r-c)*a(n,c)*e[c]*s(r,c);return t},CatmullRom:function(e,n){var t=e.length-1,r=t*n,a=Math.floor(r),s=f.Interpolation.Utils.CatmullRom;return e[0]===e[t]?(n<0&&(a=Math.floor(r=t*(1+n))),s(e[(a-1+t)%t],e[a],e[(a+1)%t],e[(a+2)%t],r-a)):n<0?e[0]-(s(e[0],e[0],e[1],e[1],-r)-e[0]):n>1?e[t]-(s(e[t],e[t],e[t-1],e[t-1],r-t)-e[t]):s(e[a?a-1:0],e[a],e[t<a+1?t:a+1],e[t<a+2?t:a+2],r-a)},Utils:{Linear:function(e,n,t){return(n-e)*t+e},Bernstein:function(e,n){var t=f.Interpolation.Utils.Factorial;return t(e)/t(n)/t(e-n)},Factorial:function(){var e=[1];return function(n){var t=1,r;if(e[n])return e[n];for(r=n;r>1;r--)t*=r;return e[n]=t}}(),CatmullRom:function(e,n,t,r,a){var s=(t-e)*.5,c=(r-n)*.5,h=a*a,p=a*h;return(2*n-2*t+s+c)*p+(-3*n+3*t-2*s-c)*h+s*a+n}}};const k=q(" \u6807\u7B7E"),ee={class:"highlight"},ne={class:"phaseOf"},te={setup(e){let n=E({base3D:{}});const t=L(null);let r=[{x:-106,y:4,z:211,name:"\u4E00\u671F\u6C89\u6C99\u6C60"},{x:-106,y:4,z:148,name:"\u4E8C\u671F\u6C89\u6C99\u6C60"},{x:-106,y:4,z:178,name:"\u4E09\u671F\u6C89\u6C99\u6C60"},{x:-292,y:4,z:58,name:"\u4E00\u671F\u53CD\u5E94\u6C60"},{x:-367,y:4,z:58,name:"\u4E00\u671F\u6C89\u6DC0\u6C60"},{x:-167,y:4,z:58,name:"\u4E00\u671F\u6C89\u6DC0\u6C60"},{x:-197,y:4,z:237,name:"\u4E00\u4E8C\u671F\u6D88\u6BD2\u6C60"},{x:-430,y:4,z:-140,name:"\u4E09\u671F\u751F\u5316\u6C60"},{x:-246,y:4,z:-140,name:"\u4E8C\u671F\u53CD\u5E94\u6C60"},{x:-478,y:4,z:60,name:"\u4E09\u671F\u4E8C\u6C89\u6C60"},{x:-474,y:4,z:205,name:"\u4E09\u671F\u6D88\u6BD2\u6C60"},{x:-48,y:4,z:245,name:"\u4E00\u4E8C\u4E09\u671F\u63D0\u5347\u6CF5\u623F"},{x:25,y:4,z:174,name:"\u6C61\u6CE5\u5927\u8F6C\u76D8"},{x:-48,y:4,z:100,name:"\u56DB\u671F\u63D0\u5347\u6CF5\u623F"},{x:49,y:4,z:100,name:"\u56DB\u671F\u6C89\u6C99\u6C60"},{x:106,y:4,z:0,name:"\u56DB\u671F\u751F\u5316\u6C60"},{x:106,y:4,z:-100,name:"\u56DB\u671F\u4E8C\u6C89\u6C60"},{x:234,y:4,z:-150,name:"\u9AD8\u6548\u6C89\u6DC0\u6C60"},{x:60,y:4,z:-167,name:"\u8F6C\u76D8\u6EE4\u6C60"},{x:-30,y:4,z:-170,name:"\u7D2B\u5916\u6D88\u6BD2\u6C60"}],a={},s={},c=[],h=null;const p=new Y,O=new W;let _=new P;_.name="labels";let x=new P;x.name="labels_2d";let b=E({backgroundColor:"#3cd4cf",renderPass:!0});F(()=>{y(),l()}),G(()=>{try{n.base3D.scene.clear(),n.base3D.renderer.dispose(),n.base3D.renderer.forceContextLoss(),n.base3D.renderer.content=null;let o=n.base3D.renderer.domElement.getContext("webgl");o&&o.getExtension("WEBGL_lose_context").loseContext()}catch(o){console.error(o)}}),N(()=>b.renderPass,o=>g(o));function y(){n.base3D=new V(t.value),Q.addFloor(n.base3D.scene),document.addEventListener("mousedown",I),u("liede.gltf"),n.base3D.scene.add(x)}function u(o){return new Promise((i,d)=>{new $().load("static/model/"+o,m=>{m.scene.scale.x=50,m.scene.scale.y=50,m.scene.scale.z=50,n.base3D.scene.add(m.scene),c.push(m.scene.getObjectByName("rotation001")),c.push(m.scene.getObjectByName("rotation002")),c.push(m.scene.getObjectByName("rotation003")),c.push(m.scene.getObjectByName("rotation004")),i(m)})}).then(()=>{r.slice(0,3).map(i=>C(i))})}function l(o){o*=.003,Object.keys(s).forEach(i=>{s[i].textureOuter.offset.x=-(o*.2)%1,s[i].cylinderTexture.offset.x=-(o*1)%1}),Object.keys(a).forEach(i=>a[i].material.uniforms.time.value+=1/660),requestAnimationFrame(l)}function g(o){n.base3D.scene.traverse(i=>{i.type==="Group"&&i.name==="labels_2d"&&(i.visible=o)})}function I(o){h&&(h.material.color.set("#FD7"),h=null),p.x=o.clientX/window.innerWidth*2-1,p.y=-(o.clientY/window.innerHeight)*2+1,O.setFromCamera(p,n.base3D.camera);const i=O.intersectObject(x,!0);if(i.length<0)return;const d=i.filter(v=>v&&v.object)[0];d&&d.object&&(h=d.object,h.material.color.set("#f00"))}function M(o){}function C(o){let{x:i,y:d,z:v,name:m}=o;new J().load("/fonts/STSong_Regular.json",T=>{let D=new K(m,{size:8,height:2,weight:"normal",font:T,style:"normal",bevelThickness:1,bevelSize:1,curveSegments:30,bevelEnabled:!0});D.computeBoundingBox();let S=new H({color:5550056}),B=new X(D,S);B.position.set(i-18,d,v),n.base3D.scene.add(B)})}return(o,i)=>(U(),A("div",{id:"sceneContainer",ref:(d,v)=>{v.sceneContainer=d,t.value=d}},[w("button",{class:"pass_button",onClick:i[0]||(i[0]=z(()=>j(b).renderPass=!j(b).renderPass,["stop"]))},[k,w("span",ee,R(j(b).renderPass?"\u5F00":"\u5173"),1)]),w("div",ne,[w("button",{class:"phaseOf_c",onClick:i[1]||(i[1]=z(d=>M(),["stop"]))},"\u4E00\u671F"),w("button",{class:"phaseOf_c",onClick:i[2]||(i[2]=z(d=>M(),["stop"]))},"\u4E8C\u671F"),w("button",{class:"phaseOf_c",onClick:i[3]||(i[3]=z(d=>M(),["stop"]))},"\u4E09\u671F"),w("button",{class:"phaseOf_c",onClick:i[4]||(i[4]=z(d=>M(),["stop"]))},"\u56DB\u671F")])],512))}};var pe=Z(te,[["__scopeId","data-v-8491a954"]]);export{pe as default};
//# sourceMappingURL=liedeScene.3bcf83e1.js.map
