{"version":3,"file":"ServiceAreaTask.b27d1964.js","sources":["../../node_modules/@arcgis/core/rest/support/ServiceAreaSolveResult.js","../../node_modules/@arcgis/core/rest/serviceArea.js","../../node_modules/@arcgis/core/tasks/ServiceAreaTask.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import\"../../geometry.js\";import e from\"../../Graphic.js\";import{JSONSupport as o}from\"../../core/JSONSupport.js\";import{filterNones as t,isSome as s,unwrap as i}from\"../../core/maybe.js\";import{property as p}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{reader as a}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as l}from\"../../core/accessorSupport/decorators/subclass.js\";import n from\"../../geometry/SpatialReference.js\";import y from\"./NAMessage.js\";import c from\"../../geometry/Point.js\";import m from\"../../geometry/Polyline.js\";import u from\"../../geometry/Polygon.js\";import{fromJSON as f}from\"../../geometry/support/jsonUtils.js\";function d(r){return r.features.map((o=>{const t=n.fromJSON(r.spatialReference),s=e.fromJSON(o);return i(s.geometry).spatialReference=t,s}))}function g(r){return t(r.features.map((e=>(s(e.geometry)&&(e.geometry.spatialReference=r.spatialReference),f(e.geometry)))))}let P=class extends o{constructor(r){super(r),this.facilities=null,this.messages=null,this.pointBarriers=null,this.polylineBarriers=null,this.polygonBarriers=null,this.serviceAreaPolylines=null,this.serviceAreaPolygons=null}readFacilities(r){return g(r)}readPointBarriers(r,e){return g(e.barriers)}readPolylineBarriers(r){return g(r)}readPolygonBarriers(r){return g(r)}readIncidents(r,e){return d(e.saPolylines)}readServiceAreaPolygons(r,e){return d(e.saPolygons)}};r([p({type:[c]})],P.prototype,\"facilities\",void 0),r([a(\"facilities\")],P.prototype,\"readFacilities\",null),r([p({type:[y]})],P.prototype,\"messages\",void 0),r([p({type:[c]})],P.prototype,\"pointBarriers\",void 0),r([a(\"pointBarriers\",[\"barriers\"])],P.prototype,\"readPointBarriers\",null),r([p({type:[m]})],P.prototype,\"polylineBarriers\",void 0),r([a(\"polylineBarriers\")],P.prototype,\"readPolylineBarriers\",null),r([p({type:[u]})],P.prototype,\"polygonBarriers\",void 0),r([a(\"polygonBarriers\")],P.prototype,\"readPolygonBarriers\",null),r([p({type:[e]})],P.prototype,\"serviceAreaPolylines\",void 0),r([a(\"serviceAreaPolylines\",[\"saPolylines\"])],P.prototype,\"readIncidents\",null),r([p({type:[e]})],P.prototype,\"serviceAreaPolygons\",void 0),r([a(\"serviceAreaPolygons\",[\"saPolygons\"])],P.prototype,\"readServiceAreaPolygons\",null),P=r([l(\"esri.rest.support.ServiceAreaSolveResult\")],P);const j=P;export{j as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport r from\"../request.js\";import{createQueryParamsHelper as e}from\"../core/queryUtils.js\";import{normalizeCentralMeridian as t}from\"../geometry/support/normalizeUtils.js\";import{collectGeometries as i,isInputGeometryZAware as a,fetchServiceDescription as s,dropZValuesOffInputGeometry as o}from\"./networkService.js\";import{parseUrl as n}from\"./utils.js\";import u from\"./support/ServiceAreaSolveResult.js\";const l=e({accumulateAttributes:{name:\"accumulateAttributeNames\"},attributeParameterValues:!0,defaultBreaks:!0,facilities:!0,outSpatialReference:{name:\"outSR\",getter:r=>r.outSpatialReference.wkid},pointBarriers:{name:\"barriers\"},polylineBarriers:!0,polygonBarriers:!0,restrictionAttributes:{name:\"restrictionAttributeNames\"},returnPointBarriers:{name:\"returnBarriers\"},travelMode:!0});async function f(e,f,p){const c=[],m=[],y={},B={},g=n(e),{path:S}=g;f.facilities&&f.facilities.features&&i(f.facilities.features,m,\"facilities.features\",y),f.pointBarriers&&f.pointBarriers.features&&i(f.pointBarriers.features,m,\"pointBarriers.features\",y),f.polylineBarriers&&f.polylineBarriers.features&&i(f.polylineBarriers.features,m,\"polylineBarriers.features\",y),f.polygonBarriers&&f.polygonBarriers.features&&i(f.polygonBarriers.features,m,\"polygonBarriers.features\",y);const j=await t(m);for(const r in y){const e=y[r];c.push(r),B[r]=j.slice(e[0],e[1])}if(a(B,c)){let r=null;try{r=await s(S,f.apiKey,p)}catch{}r&&!r.hasZ&&o(B,c)}for(const r in B)B[r].forEach(((e,t)=>{f.get(r)[t].geometry=e}));const b={...p,query:{...g.query,...l.toQueryParams(f),f:\"json\"}},{data:v}=await r(`${S}/solveServiceArea`,b);return u.fromJSON(v)}export{f as solve};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../chunks/tslib.es6.js\";import{property as s}from\"../core/accessorSupport/decorators/property.js\";import\"../core/arrayUtils.js\";import\"../core/has.js\";import\"../core/accessorSupport/ensureType.js\";import{subclass as o}from\"../core/accessorSupport/decorators/subclass.js\";import{solve as e}from\"../rest/serviceArea.js\";import t from\"./Task.js\";let c=class extends t{constructor(r){super(r),this.url=null}solve(r,s){return e(this.url,r,s)}};r([s()],c.prototype,\"url\",void 0),c=r([o(\"esri.tasks.ServiceAreaTask\")],c);const p=c;export{p as default};\n"],"names":["n","e","i","r","t","s","f","o","p","c","a","y","u","l","j"],"mappings":"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"}