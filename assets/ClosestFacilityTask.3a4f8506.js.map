{"version":3,"file":"ClosestFacilityTask.3a4f8506.js","sources":["../../node_modules/@arcgis/core/rest/support/ClosestFacilitySolveResult.js","../../node_modules/@arcgis/core/rest/closestFacility.js","../../node_modules/@arcgis/core/tasks/ClosestFacilityTask.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import\"../../geometry.js\";import e from\"../../Graphic.js\";import{JSONSupport as o}from\"../../core/JSONSupport.js\";import{isSome as t}from\"../../core/maybe.js\";import{property as s}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{reader as i}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as p}from\"../../core/accessorSupport/decorators/subclass.js\";import a from\"../../geometry/SpatialReference.js\";import n from\"./DirectionsFeatureSet.js\";import l from\"./FeatureSet.js\";import m from\"./NAMessage.js\";import u from\"../../geometry/Point.js\";import y from\"../../geometry/Polyline.js\";import c from\"../../geometry/Polygon.js\";function d(r){return r.features.map((o=>{const s=a.fromJSON(r.spatialReference),i=e.fromJSON(o);return t(i.geometry)&&(i.geometry.spatialReference=s),i}))}function f(r){return l.fromJSON(r).features.map((r=>r.geometry))}let j=class extends o{constructor(r){super(r),this.directions=null,this.facilities=null,this.incidents=null,this.messages=null,this.pointBarriers=null,this.polylineBarriers=null,this.polygonBarriers=null,this.routes=null}readFacilities(r){return f(r)}readIncidents(r){return f(r)}readPointBarriers(r,e){return f(e.barriers)}readPolylineBarriers(r){return f(r)}readPolygonBarriers(r){return f(r)}readRoutes(r){return d(r)}};r([s({type:[n]})],j.prototype,\"directions\",void 0),r([s({type:[u]})],j.prototype,\"facilities\",void 0),r([i(\"facilities\")],j.prototype,\"readFacilities\",null),r([s({type:[u]})],j.prototype,\"incidents\",void 0),r([i(\"incidents\")],j.prototype,\"readIncidents\",null),r([s({type:[m]})],j.prototype,\"messages\",void 0),r([s({type:[u]})],j.prototype,\"pointBarriers\",void 0),r([i(\"pointBarriers\",[\"barriers\"])],j.prototype,\"readPointBarriers\",null),r([s({type:[y]})],j.prototype,\"polylineBarriers\",void 0),r([i(\"polylineBarriers\")],j.prototype,\"readPolylineBarriers\",null),r([s({type:[c]})],j.prototype,\"polygonBarriers\",void 0),r([i(\"polygonBarriers\")],j.prototype,\"readPolygonBarriers\",null),r([s({type:[e]})],j.prototype,\"routes\",void 0),r([i(\"routes\")],j.prototype,\"readRoutes\",null),j=r([p(\"esri.rest.support.ClosestFacilitySolveResult\")],j);const g=j;export{g as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport e from\"../request.js\";import{createQueryParamsHelper as r}from\"../core/queryUtils.js\";import{normalizeCentralMeridian as t}from\"../geometry/support/normalizeUtils.js\";import{collectGeometries as i,isInputGeometryZAware as s,fetchServiceDescription as a,dropZValuesOffInputGeometry as o}from\"./networkService.js\";import{parseUrl as n}from\"./utils.js\";import u from\"./support/ClosestFacilitySolveResult.js\";const l=r({accumulateAttributes:{name:\"accumulateAttributeNames\"},attributeParameterValues:!0,directionsTimeAttribute:{name:\"directionsTimeAttributeName\"},impedanceAttribute:{name:\"impedanceAttributeName\"},facilities:!0,incidents:!0,outSpatialReference:{name:\"outSR\",getter:e=>e.outSpatialReference.wkid},pointBarriers:{name:\"barriers\"},polylineBarriers:!0,polygonBarriers:!0,restrictionAttributes:{name:\"restrictionAttributeNames\"},returnPointBarriers:{name:\"returnBarriers\"},returnRoutes:{name:\"returnCFRoutes\"},travelMode:!0});async function c(r,c,m){const f=[],p=[],y={},B={},d=n(r),{path:b}=d;c.incidents&&c.incidents.features&&i(c.incidents.features,p,\"incidents.features\",y),c.facilities&&c.facilities.features&&i(c.facilities.features,p,\"facilities.features\",y),c.pointBarriers&&c.pointBarriers.features&&i(c.pointBarriers.features,p,\"pointBarriers.features\",y),c.polylineBarriers&&c.polylineBarriers.features&&i(c.polylineBarriers.features,p,\"polylineBarriers.features\",y),c.polygonBarriers&&c.polygonBarriers.features&&i(c.polygonBarriers.features,p,\"polygonBarriers.features\",y);const g=await t(p);for(const e in y){const r=y[e];f.push(e),B[e]=g.slice(r[0],r[1])}if(s(B,f)){let e=null;try{e=await a(b,c.apiKey,m)}catch{}e&&!e.hasZ&&o(B,f)}for(const e in B)B[e].forEach(((r,t)=>{c.get(e)[t].geometry=r}));const A={...m,query:{...d.query,...l.toQueryParams(c),f:\"json\"}},{data:j}=await e(`${b}/solveClosestFacility`,A);return u.fromJSON(j)}export{c as solve};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as s}from\"../chunks/tslib.es6.js\";import{property as r}from\"../core/accessorSupport/decorators/property.js\";import\"../core/arrayUtils.js\";import\"../core/has.js\";import\"../core/accessorSupport/ensureType.js\";import{subclass as o}from\"../core/accessorSupport/decorators/subclass.js\";import{solve as t}from\"../rest/closestFacility.js\";import e from\"./Task.js\";let c=class extends e{constructor(s){super(s),this.url=null}solve(s,r){return t(this.url,s,r)}};s([r()],c.prototype,\"url\",void 0),c=s([o(\"esri.tasks.ClosestFacilityTask\")],c);const p=c;export{p as default};\n"],"names":["r","a","e","t","l","o","s","n","u","i","m","y","c","p","g"],"mappings":"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"}