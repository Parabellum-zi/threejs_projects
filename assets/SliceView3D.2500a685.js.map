{"version":3,"file":"SliceView3D.2500a685.js","sources":["../../node_modules/@arcgis/core/views/3d/analysis/support/loggerUtils.js","../../node_modules/@arcgis/core/views/3d/interactive/Manipulator3D.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/ScreenSizeScaling.glsl.js","../../node_modules/@arcgis/core/chunks/ShadedColorMaterial.glsl.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/ShadedColorMaterialTechnique.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/materials/ShadedColorMaterial.js","../../node_modules/@arcgis/core/views/3d/interactive/manipulatorUtils.js","../../node_modules/@arcgis/core/views/3d/interactive/analysisTools/slice/sliceToolConfig.js","../../node_modules/@arcgis/core/chunks/SlicePlaneMaterial.glsl.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/SlicePlaneMaterialTechnique.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/materials/SlicePlaneMaterial.js","../../node_modules/@arcgis/core/views/3d/interactive/visualElements/SlicePlaneVisualElement.js","../../node_modules/@arcgis/core/widgets/Slice/SlicePlane.js","../../node_modules/@arcgis/core/views/3d/interactive/analysisTools/slice/sliceToolUtils.js","../../node_modules/@arcgis/core/views/3d/analysis/Slice/SliceController.js","../../node_modules/@arcgis/core/views/3d/analysis/Slice/SliceViewData.js","../../node_modules/@arcgis/core/views/3d/analysis/Slice/SliceVisualization.js","../../node_modules/@arcgis/core/views/3d/analysis/Slice/SliceView3D.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nfunction e(e,o,i){i.warnOnce(`Failed to project analysis geometry (id: '${e.id}'), projection from spatial reference (wkid: '${o.wkid}') to view spatial reference is not supported. Projection may be possible after calling projection.load().`)}export{e as logFailedGeometryProjectionError};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport\"../../../geometry.js\";import{neverReached as e}from\"../../../core/compilerUtils.js\";import t from\"../../../core/Evented.js\";import{deg2rad as i}from\"../../../core/mathUtils.js\";import{isSome as s,isNone as o,unwrapOr as r,unwrap as n}from\"../../../core/maybe.js\";import{createScreenPointArray as a,createRenderScreenPointArray3 as c,screenPointObjectToArray as l,castRenderScreenPointArray as h}from\"../../../core/screenUtils.js\";import{once as d}from\"../../../core/accessorSupport/utils.js\";import{f as u}from\"../../../chunks/mat3.js\";import{c as _}from\"../../../chunks/mat3f64.js\";import{c as g,s as m,m as f,i as p}from\"../../../chunks/mat4.js\";import{c as v}from\"../../../chunks/mat4f64.js\";import{a as b}from\"../../../chunks/vec2.js\";import{b as y,t as j,m as L,a as S,g as R,h as w,s as O,f as T}from\"../../../chunks/vec3.js\";import{c as E,Z as A}from\"../../../chunks/vec3f64.js\";import{canProjectWithoutEngine as D,projectPoint as F,sphericalPCPFtoLonLatElevation as z,computeENUToSphericalPCPFLocalRotation as k}from\"../../../geometry/projection.js\";import{getReferenceEllipsoid as P}from\"../../../geometry/projectionEllipsoid.js\";import{containsPointObject as I}from\"../../../geometry/support/aaBoundingRect.js\";import{create as M,distance2 as C,fromPoints as x,closestRayDistance2 as B}from\"../../../geometry/support/lineSegment.js\";import{create as W,fromPositionAndNormal as V,intersectRay as U}from\"../../../geometry/support/plane.js\";import{create as G}from\"../../../geometry/support/ray.js\";import{sv3d as H}from\"../../../geometry/support/vectorStacks.js\";import{clonePoint as Z}from\"../../../layers/graphics/hydratedFeatures.js\";import{getElevationAtPoint as q}from\"../support/ElevationProvider.js\";import{fromScreen as J}from\"../support/geometryUtils/ray.js\";import K from\"../webgl-engine/lib/Camera.js\";import{Object3D as N}from\"../webgl-engine/lib/Object3D.js\";import{WebGLLayer as Q}from\"../webgl-engine/lib/WebGLLayer.js\";import X from\"../../../geometry/Point.js\";class Y{constructor(e){this.camera=new K,this._elevation={offset:0,override:null},this.collisionType={type:\"point\"},this.collisionPriority=0,this._renderObjects=[],this.autoScaleRenderObjects=!0,this._available=!0,this._noDisplayCount=0,this._radius=10,this._worldSized=!1,this.focusMultiplier=2,this.touchMultiplier=2.5,this.worldOriented=!1,this._modelTransform=v(),this._worldFrame=null,this._renderLocation=E(),this._renderLocationDirty=!0,this._location=new X({x:0,y:0,z:0}),this._elevationAlignedLocation=new X,this._elevationAlignedLocationDirty=!0,this.interactive=!0,this.selectable=!1,this.grabbable=!0,this.cursor=null,this._grabbing=!1,this.dragging=!1,this._hovering=!1,this._selected=!1,this._state=0,this._focused=!1,this.events=new t.EventEmitter,this._screenLocation={screenPointArray:a(),renderScreenPointArray:c(),pixelSize:0},this._screenLocationDirty=!0,this._applyObjectTransform=null,this._engineResourcesAddedToStage=!1,this._engineResources=null,this._attached=!1,this._engineLayer=null,this._materialIdReferences=null,this._location.spatialReference=e.view.spatialReference;for(const t in e)this[t]=e[t];this.view.state&&this.view.state.camera&&this.camera.copyFrom(this.view.state.camera)}destroy(){this._removeResourcesFromStage(),this._engineResources=null,this.view=null,this.camera=null}get elevationInfo(){return this._elevationInfo}set elevationInfo(e){this._elevationInfo=e,this._elevationAlignedLocationDirty=!0,this._renderLocationDirty=!0,this._updateEngineObject()}get renderObjects(){return this._renderObjects}set renderObjects(e){this._removeResourcesFromStage(),this._engineResources=null,this._renderObjects=e.slice(),this._updateEngineObject()}set available(e){e!==this._available&&(this._available=e,this._updateEngineObject())}get available(){return this._available}disableDisplay(){return this._noDisplayCount++,1===this._noDisplayCount&&this._updateEngineObject(),{remove:d((()=>{this._noDisplayCount--,0===this._noDisplayCount&&this._updateEngineObject()}))}}set radius(e){e!==this._radius&&(this._radius=e,this._updateEngineObject())}get radius(){return this._radius}set worldSized(e){e!==this._worldSized&&(this._worldSized=e,this._updateEngineObject())}get worldSized(){return this._worldSized}get modelTransform(){return this._modelTransform}set modelTransform(e){$(e)&&(this._screenLocationDirty=!0),g(this._modelTransform,e),this._updateEngineObject()}get renderLocation(){return this._renderLocationDirty&&(this._renderLocationDirty=!1,this.view.renderCoordsHelper.toRenderCoords(this.elevationAlignedLocation,this._renderLocation),this.worldOriented?(this._worldFrame||(this._worldFrame=v()),ee(this.view,this._renderLocation,this._worldFrame)):this._worldFrame&&(this._worldFrame=null)),this._renderLocation}set renderLocation(e){this.view.renderCoordsHelper.fromRenderCoords(e,this._location),this.elevationAlignedLocation=this._location}get location(){return this._location}set location(e){Z(e,this._location),this._renderLocationDirty=!0,this._screenLocationDirty=!0,this._elevationAlignedLocationDirty=!0,this._updateEngineObject(),this.events.emit(\"location-update\",{location:this._location})}get elevationAlignedLocation(){return this._elevationAlignedLocationDirty?(this._evaluateElevationAlignment(),this._updateElevationAlignedLocation(),this._elevationAlignedLocation):this._elevationAlignedLocation}set elevationAlignedLocation(e){Z(e,this._location),this._evaluateElevationAlignment(),this._location.z-=this._elevation.offset,this._updateElevationAlignedLocation(),this._updateEngineObject(),this.events.emit(\"location-update\",{location:this._location})}_updateElevationAlignedLocation(){this._elevationAlignedLocation.x=this.location.x,this._elevationAlignedLocation.y=this.location.y;const e=s(this._elevation.override)?this._elevation.override:this.location.z||0;this._elevationAlignedLocation.z=e+this._elevation.offset,this._elevationAlignedLocation.spatialReference=this.location.spatialReference,this._renderLocationDirty=!0,this._screenLocationDirty=!0,this._elevationAlignedLocationDirty=!1}grabbableForEvent(){return!0}get grabbing(){return this._grabbing}set grabbing(e){e!==this._grabbing&&(this._grabbing=e,this._setFocused(this._hovering||this._grabbing),this._updateEngineObject())}get hovering(){return this._hovering}set hovering(e){e!==this._hovering&&(this._hovering=e,this._setFocused(this._hovering||this._grabbing),this._updateEngineObject())}get selected(){return this._selected}set selected(e){e!==this._selected&&(this._selected=e,this._updateEngineObject(),this.events.emit(\"select-changed\",{action:e?\"select\":\"deselect\"}))}get state(){return this._state}set state(e){e!==this._state&&(this._state=e,this._updateEngineObject())}updateStateEnabled(e,t){t?this.state|=e:this.state&=~e}_setFocused(e){e!==this._focused&&(this._focused=e,this.events.emit(\"focus-changed\",{action:!0===e?\"focus\":\"unfocus\"}))}get focused(){return this._focused}get screenLocation(){return this.ensureScreenLocation(),this._screenLocation}ensureScreenLocation(){if(!this._screenLocationDirty)return;this._screenLocation.pixelSize=this.camera.computeScreenPixelSizeAt(this.renderLocation),this._screenLocationDirty=!1;let e;if($(this._modelTransform)){const t=this._calculateModelTransformOffset(_e);e=y(t,t,this.renderLocation)}else e=this.renderLocation;this.camera.projectToRenderScreen(e,this._screenLocation.renderScreenPointArray),this.camera.renderToScreen(this._screenLocation.renderScreenPointArray,this._screenLocation.screenPointArray)}get applyObjectTransform(){return this._applyObjectTransform}set applyObjectTransform(e){this._applyObjectTransform=e,this._screenLocationDirty=!0,this._updateEngineObject()}intersectionDistance(t,i){if(!this.available)return null;const s=l(t,te),r=this._getCollisionRadius(i),n=-1*this.collisionPriority;switch(this.collisionType.type){case\"point\":if(b(this.screenLocation.screenPointArray,s)<r*r)return this.screenLocation.renderScreenPointArray[2]+n;break;case\"line\":{const e=this.collisionType.paths,t=this._getWorldToScreenObjectScale(),i=this._calculateObjectTransform(t,ne),a=r*this.screenLocation.pixelSize,c=J(this.camera,s,se);if(o(c))return null;for(const s of e){if(0===s.length)continue;const e=L(ce,s[0],i);for(let t=1;t<s.length;t++){const o=L(le,s[t],i),r=B(x(e,o,ie),c);if(null!=r&&r<a*a){const t=y(H.get(),e,o);S(t,t,.5);const i=h(H.get());return this.camera.projectToRenderScreen(t,i),i[2]+n}R(e,o)}}break}case\"disc\":{var a;const e=this.collisionType.direction,t=null!=(a=this.collisionType.offset)?a:A,i=this._getWorldToScreenObjectScale(),c=this._calculateObjectTransform(i,ne),l=r*this.screenLocation.pixelSize,h=J(this.camera,s,se);if(o(h))return null;const d=u(oe,c),_=j(de,e,d),g=L(ue,t,c);V(g,_,ae);const m=he;if(U(ae,h,m)&&w(m,g)<l*l)return this.screenLocation.renderScreenPointArray[2]+n;break}case\"ribbon\":{const{paths:e,direction:t}=this.collisionType,i=this._getWorldToScreenObjectScale(),a=this._calculateObjectTransform(i,ne),c=r*this.camera.computeScreenPixelSizeAt(this.renderLocation),l=J(this.camera,s,se);if(o(l))return null;const d=u(oe,a),_=j(de,t,d),g=this._calculateModelTransformPosition(ue);V(g,_,ae);const m=he;if(!U(ae,l,m))break;for(const s of e){if(0===s.length)continue;const e=L(ce,s[0],a);for(let t=1;t<s.length;t++){const i=L(le,s[t],a),o=C(x(e,i,ie),m);if(null!=o&&o<c*c){const t=y(H.get(),e,i);S(t,t,.5);const s=h(H.get());return this.camera.projectToRenderScreen(t,s),s[2]+n}R(e,i)}}break}default:e(this.collisionType)}return null}attach(e={manipulator3D:{}}){var t;if(!this.view._stage)return;const i=e.manipulator3D;if(o(i.engineLayerId)){const e=new Q({isPickable:!1,updatePolicy:1});this.view._stage.add(e),i.engineLayerId=e.id,this._engineLayer=e}else null!=(t=this.view._stage)&&t.getObject&&(this._engineLayer=this.view._stage.getObject(i.engineLayerId));i.engineLayerReferences=(i.engineLayerReferences||0)+1,this._materialIdReferences=i.materialIdReferences,o(this._materialIdReferences)&&(this._materialIdReferences=new Map,i.materialIdReferences=this._materialIdReferences),this.camera.copyFrom(this.view.state.camera),this._attached=!0,this._updateEngineObject(),D(this._location.spatialReference,this.view.spatialReference)||(this.location=new X({x:0,y:0,z:0,spatialReference:this.view.spatialReference}))}detach(e={manipulator3D:{}}){const t=e.manipulator3D;t.engineLayerReferences--;const i=0===t.engineLayerReferences;i&&(t.engineLayerId=null),this._removeResourcesFromStage(i),this._engineResources=null,this._engineLayer=null,this._materialIdReferences=null,this._attached=!1}onViewChange(){this.camera.copyFrom(this.view.state.camera),this._screenLocationDirty=!0,this._updateEngineObject()}onElevationChange(e){F(this.location,ge,e.spatialReference),I(e.extent,ge)&&(this.location=this._location)}_evaluateElevationAlignment(e=this.location){if(o(this.elevationInfo))return!1;let t=null,i=0;const s=r(this.elevationInfo.offset,0);switch(this.elevationInfo.mode){case\"on-the-ground\":t=r(q(this.view.elevationProvider,e,\"ground\"),0);break;case\"relative-to-ground\":i=r(q(this.view.elevationProvider,e,\"ground\"),0)+s;break;case\"relative-to-scene\":i=r(q(this.view.elevationProvider,e,\"scene\"),0)+s;break;case\"absolute-height\":i=s}return(i!==this._elevation.offset||t!==this._elevation.override)&&(this._elevation.offset=i,this._elevation.override=t,!0)}_updateEngineObject(){if(!this._attached)return;if(!this.available)return void this._removeResourcesFromStage();const e=this._getWorldToScreenObjectScale(),t=ne;if(!0===this.autoScaleRenderObjects){const i=this._getFocusedSize(this._radius,this.focused)*e;this._calculateObjectTransform(i,t)}else this._calculateObjectTransform(e,t);const{objectsByState:i}=this._ensureEngineResources(),s=(this.focused?2:1)|(this.selected?8:4),o=this._noDisplayCount>0;for(const{stateMask:r,objects:n}of i){if(o){for(const e of n)e.setVisible(!1);continue}const e=!(0!=(15&r))||(s&r)==(15&r),i=!(0!=(65520&r))||(this.state&r)==(65520&r);if(e&&i)for(const s of n)s.setVisible(!0),s.transformation=t;else for(const t of n)t.setVisible(!1)}}_ensureEngineResources(){if(o(this._engineResources)){const e=n(this._engineLayer),t=[],i=new Set;this.renderObjects.forEach((({material:e})=>{i.has(e)||(t.push(e),i.add(e))}));const s=(e,t)=>{const{geometry:i,material:s,transform:o}=t;Array.isArray(i)?i.forEach((t=>e.addGeometry(t,s,o))):e.addGeometry(i,s,o)},o=new Map;this._renderObjects.forEach((e=>{const t=new N({castShadow:!1});s(t,e);const i=e.stateMask||0,r=o.get(i)||[];r.push(t),o.set(i,r)}));const r=[];o.forEach(((e,t)=>r.push({stateMask:t,objects:e}))),this._engineResources={objectsByState:r,layer:e,materials:t}}return this._addResourcesToStage(),this._engineResources}_addResourcesToStage(){if(this._engineResourcesAddedToStage||o(this._engineResources))return;const{objectsByState:e,layer:t,materials:i}=this._engineResources;i.forEach((e=>{const t=n(this._materialIdReferences),i=t.get(e.id)||0;0===i&&this.view._stage.add(e),t.set(e.id,i+1)})),e.forEach((({objects:e})=>{t.addMany(e),this.view._stage.addMany(e)})),this._engineResourcesAddedToStage=!0}_removeResourcesFromStage(e=!1){if(!this._engineResourcesAddedToStage||o(this._engineResources))return;const{objectsByState:t,layer:i,materials:s}=this._engineResources;t.forEach((({objects:e})=>{i.removeMany(e),this.view._stage.removeMany(e)})),s.forEach((e=>{const t=n(this._materialIdReferences),i=t.get(e.id);1===i?(this.view._stage.remove(e),t.delete(e.id)):t.set(e.id,i-1)})),e&&this.view._stage.remove(i),this._engineResourcesAddedToStage=!1}_getCollisionRadius(e){return this._getFocusedSize(this.radius,!0)*(\"touch\"===e?this.touchMultiplier:1)}_getFocusedSize(e,t){return e*(t?this.focusMultiplier:1)}_getWorldToScreenObjectScale(){return this._worldSized?1:this.screenLocation.pixelSize}_calculateModelTransformPosition(e){const t=this._getWorldToScreenObjectScale(),i=this._calculateObjectTransform(t,re);return O(e,i[12],i[13],i[14])}_calculateModelTransformOffset(e){const t=this._calculateModelTransformPosition(e);return T(e,t,this.renderLocation)}_calculateObjectTransform(e,t){return m(t,e,0,0,0,0,e,0,0,0,0,e,0,0,0,0,1),this._worldFrame&&f(t,t,this._worldFrame),f(t,t,this._modelTransform),t[12]+=this.renderLocation[0],t[13]+=this.renderLocation[1],t[14]+=this.renderLocation[2],t[15]=1,s(this._applyObjectTransform)&&this._applyObjectTransform(t),t}get test(){let e=!1;if(s(this._engineResources))for(const t in this._engineResources.objectsByState){const i=this._engineResources.objectsByState[t];for(const t of i.objects)if(t.isVisible){e=!0;break}if(e)break}return{areAnyResourcesVisible:e}}}function $(e){return 0!==e[12]||0!==e[13]||0!==e[14]}function ee(e,t,s){switch(e.viewingMode){case\"local\":return p(s),!0;case\"global\":{const o=P(e.renderCoordsHelper.spatialReference);return z(t,0,ce,0,o.radius),k(i(ce[0]),i(ce[1]),s),!0}}}const te=a(),ie=M(),se=G(),oe=_(),re=v(),ne=v(),ae=W(),ce=E(),le=E(),he=E(),de=E(),ue=E(),_e=E(),ge=new X({x:0,y:0,z:0,spatialReference:null});export{Y as Manipulator3D};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../shaderModules/interfaces.js\";function i(i){i.vertex.uniforms.add(\"camPos\",\"vec3\").add(\"perScreenPixelRatio\",\"float\").add(\"screenSize\",\"float\"),i.vertex.code.add(e`float computeRenderPixelSizeAt( vec3 pWorld ){\nvec3 viewForward = - vec3(view[0][2], view[1][2], view[2][2]);\nfloat viewDirectionDistance = abs(dot(viewForward, pWorld - camPos));\nreturn viewDirectionDistance*perScreenPixelRatio;\n}\nvec3 screenSizeScaling(vec3 position, vec3 anchor){\nreturn position * screenSize * computeRenderPixelSizeAt(anchor) + anchor;\n}`)}function r(e,i,r){e.setUniform1f(\"perScreenPixelRatio\",r.camera.perScreenPixelRatio),e.setUniform1f(\"screenSize\",i.screenSize)}export{i as ScreenSizeScaling,r as bindScreenSizeScalingUniforms};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{ScreenSizeScaling as e}from\"../views/3d/webgl-engine/core/shaderLibrary/ScreenSizeScaling.glsl.js\";import{Slice as r}from\"../views/3d/webgl-engine/core/shaderLibrary/Slice.glsl.js\";import{Transform as o}from\"../views/3d/webgl-engine/core/shaderLibrary/Transform.glsl.js\";import{ReadLinearDepth as i}from\"../views/3d/webgl-engine/core/shaderLibrary/output/ReadLinearDepth.glsl.js\";import{multipassTerrainTest as a}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/MultipassTerrainTest.glsl.js\";import{symbolAlphaCutoff as d}from\"../views/3d/webgl-engine/core/shaderLibrary/util/AlphaDiscard.glsl.js\";import{ColorConversion as l}from\"../views/3d/webgl-engine/core/shaderLibrary/util/ColorConversion.glsl.js\";import{glsl as n}from\"../views/3d/webgl-engine/core/shaderModules/interfaces.js\";import{ShaderBuilder as s}from\"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js\";function t(t){const c=new s;return c.include(o,{linearDepth:!1}),c.include(e,{}),c.include(r,t),c.fragment.include(l),c.vertex.uniforms.add(\"proj\",\"mat4\").add(\"view\",\"mat4\"),c.fragment.uniforms.add(\"color\",\"vec4\"),c.attributes.add(\"position\",\"vec3\"),c.varyings.add(\"vWorldPosition\",\"vec3\"),t.multipassTerrainEnabled&&c.varyings.add(\"depth\",\"float\"),t.screenSizeEnabled&&c.attributes.add(\"offset\",\"vec3\"),t.shadingEnabled&&(c.vertex.uniforms.add(\"viewNormal\",\"mat4\"),c.fragment.uniforms.add(\"shadedColor\",\"vec4\").add(\"shadingDirection\",\"vec3\"),c.attributes.add(\"normal\",\"vec3\"),c.varyings.add(\"vViewNormal\",\"vec3\")),c.vertex.code.add(n`\n    void main(void) {\n      vWorldPosition = ${t.screenSizeEnabled?\"screenSizeScaling(offset, position)\":\"position\"};\n  `),t.shadingEnabled&&c.vertex.code.add(n`vec3 worldNormal = normal;\nvViewNormal = (viewNormal * vec4(worldNormal, 1)).xyz;`),c.vertex.code.add(n`\n    ${t.multipassTerrainEnabled?\"depth = (view * vec4(vWorldPosition, 1.0)).z;\":\"\"}\n    gl_Position = transformPosition(proj, view, vWorldPosition);\n  }\n  `),t.multipassTerrainEnabled&&(c.fragment.include(i),c.include(a,t)),c.fragment.code.add(n`\n    void main() {\n      discardBySlice(vWorldPosition);\n      ${t.multipassTerrainEnabled?\"terrainDepthTest(gl_FragCoord, depth);\":\"\"}\n    `),t.shadingEnabled?c.fragment.code.add(n`vec3 viewNormalNorm = normalize(vViewNormal);\nfloat shadingFactor = 1.0 - clamp(-dot(viewNormalNorm, shadingDirection), 0.0, 1.0);\nvec4 finalColor = mix(color, shadedColor, shadingFactor);`):c.fragment.code.add(n`vec4 finalColor = color;`),c.fragment.code.add(n`\n      if (finalColor.a < ${n.float(d)}) {\n        discard;\n      }\n      ${7===t.output?n`gl_FragColor = vec4(finalColor.a);`:\"\"}\n\n      ${0===t.output?n`gl_FragColor = highlightSlice(finalColor, vWorldPosition); ${t.OITEnabled?\"gl_FragColor = premultiplyAlpha(gl_FragColor);\":\"\"}`:\"\"}\n    }\n    `),c}const c=Object.freeze({__proto__:null,build:t});export{c as S,t as b};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import{c as r}from\"../../../../chunks/vec4f64.js\";import{bindScreenSizeScalingUniforms as i}from\"../core/shaderLibrary/ScreenSizeScaling.glsl.js\";import{bindSliceUniformsWithOrigin as t}from\"../core/shaderLibrary/Slice.glsl.js\";import{bindMultipassTerrainTexture as o}from\"../core/shaderLibrary/shading/MultipassTerrainTest.glsl.js\";import{bindProjectionMatrix as s,bindView as a,bindCameraPosition as n}from\"../core/shaderLibrary/util/View.glsl.js\";import{ReloadableShaderModule as l}from\"../core/shaderTechnique/ReloadableShaderModule.js\";import{ShaderTechnique as p}from\"../core/shaderTechnique/ShaderTechnique.js\";import{parameter as d,ShaderTechniqueConfiguration as c}from\"../core/shaderTechnique/ShaderTechniqueConfiguration.js\";import{blendingDefault as h,OITBlending as m,OITDepthWrite as u,OITPolygonOffset as g}from\"../lib/OrderIndependentTransparency.js\";import{Program as b}from\"../lib/Program.js\";import{S as f}from\"../../../../chunks/ShadedColorMaterial.glsl.js\";import{makePipelineState as v,cullingParams as y,defaultDepthWriteParams as T,defaultColorWriteParams as E}from\"../../../webgl/renderState.js\";class S extends p{initializeProgram(e){const r=S.shader.get(),i=this.configuration,t=r.build({output:i.output,slicePlaneEnabled:i.slicePlaneEnabled,sliceHighlightDisabled:!1,sliceEnabledForVertexPrograms:!1,screenSizeEnabled:i.screenSizeEnabled,shadingEnabled:i.shadingEnabled,OITEnabled:0===i.transparencyPassType,multipassTerrainEnabled:i.multipassTerrainEnabled,cullAboveGround:i.cullAboveGround});return new b(e.rctx,t,P)}bindPass(e,r){const{screenSizeEnabled:t,shadingEnabled:a}=this.configuration,{color:n,shadingTint:l,shadingDirection:p}=e;s(this.program,r.camera.projectionMatrix),this.program.setUniform4fv(\"color\",n),r.multipassTerrainEnabled&&(this.program.setUniform2fv(\"cameraNearFar\",r.camera.nearFar),this.program.setUniform2fv(\"inverseViewport\",r.inverseViewport),o(this.program,r)),a&&(this.program.setUniform4fv(\"shadedColor\",this.blendColor(w,l,n)),this.program.setUniform3fv(\"shadingDirection\",p),this.program.setUniformMatrix4fv(\"viewNormal\",r.camera.viewInverseTransposeMatrix)),t&&i(this.program,e,r)}bindDraw(e){a(this.program,e),n(this.program,e.origin,e.camera.viewInverseTransposeMatrix),t(this.program,this.configuration,e),this.program.rebindTextures()}blendColor(e,r,i){const t=1-r[3],o=r[3]+i[3]*t;return 0===o?(e[3]=o,e):(e[0]=(r[0]*r[3]+i[0]*i[3]*t)/o,e[1]=(r[1]*r[3]+i[1]*i[3]*t)/o,e[2]=(r[2]*r[3]+i[2]*i[3]*t)/o,e[3]=i[3],e)}setPipelineState(e){const r=this.configuration,i=3===e,t=2===e;return v({blending:0!==r.output&&7!==r.output||!r.transparent?null:i?h:m(e),culling:y(r.cullFace),depthTest:{func:t?513:r.shadingEnabled?515:513},depthWrite:i?r.writeDepth&&T:u(e),colorWrite:E,polygonOffset:i||t?null:g})}initializePipeline(){return this.setPipelineState(this.configuration.transparencyPassType)}}S.shader=new l(f,(()=>import(\"./ShadedColorMaterial.glsl.js\")));class j extends c{constructor(){super(...arguments),this.output=0,this.cullFace=0,this.slicePlaneEnabled=!1,this.transparent=!1,this.writeDepth=!0,this.screenSizeEnabled=!0,this.shadingEnabled=!0,this.transparencyPassType=3,this.multipassTerrainEnabled=!1,this.cullAboveGround=!1}}e([d({count:8})],j.prototype,\"output\",void 0),e([d({count:3})],j.prototype,\"cullFace\",void 0),e([d()],j.prototype,\"slicePlaneEnabled\",void 0),e([d()],j.prototype,\"transparent\",void 0),e([d()],j.prototype,\"writeDepth\",void 0),e([d()],j.prototype,\"screenSizeEnabled\",void 0),e([d()],j.prototype,\"shadingEnabled\",void 0),e([d({count:4})],j.prototype,\"transparencyPassType\",void 0),e([d()],j.prototype,\"multipassTerrainEnabled\",void 0),e([d()],j.prototype,\"cullAboveGround\",void 0);const P=new Map([[\"position\",0],[\"normal\",1],[\"offset\",2]]),w=r();export{S as ShadedColorMaterialTechnique,j as ShadedColorMaterialTechniqueConfiguration,P as ShadedColorMaterialVertexAttrLocations};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{n as e,s as t,a as r,b as s}from\"../../../../chunks/vec3.js\";import{c as i}from\"../../../../chunks/vec3f64.js\";import{center as a,scale as n}from\"../../../../geometry/support/aaBoundingBox.js\";import{BufferViewVec3f as o}from\"../../../../geometry/support/buffer/BufferView.js\";import{newLayout as u}from\"../../support/buffer/InterleavedLayout.js\";import c from\"../lib/GLMaterial.js\";import{outputFromPass as l}from\"../lib/GLMaterials.js\";import{materialParametersDefaults as f,Material as h}from\"../lib/Material.js\";import{assert as p}from\"../lib/Util.js\";import{writeDefaultAttributes as m,writePosition as d}from\"./internal/bufferWriterUtils.js\";import{intersectTriangleGeometry as b}from\"./internal/MaterialUtil.js\";import{ShadedColorMaterialTechniqueConfiguration as g,ShadedColorMaterialVertexAttrLocations as v,ShadedColorMaterialTechnique as E}from\"../shaders/ShadedColorMaterialTechnique.js\";class q extends h{constructor(e){super(e,C),this.supportsEdges=!0,this.techniqueConfig=new g,this._vertexAttributeLocations=v}getTechniqueConfig(e,t){return this.techniqueConfig.output=e,this.techniqueConfig.cullFace=this.parameters.cullFace,this.techniqueConfig.slicePlaneEnabled=this.parameters.slicePlaneEnabled,this.techniqueConfig.transparent=this.parameters.transparent,this.techniqueConfig.writeDepth=this.parameters.writeDepth,this.techniqueConfig.screenSizeEnabled=this.parameters.screenSizeEnabled,this.techniqueConfig.shadingEnabled=this.parameters.shadingEnabled,this.techniqueConfig.transparencyPassType=t.transparencyPassType,this.techniqueConfig.multipassTerrainEnabled=t.multipassTerrainEnabled,this.techniqueConfig.cullAboveGround=t.cullAboveGround,this.techniqueConfig}getPassParameters(){return this.parameters}intersect(e,i,o,u,c,l,f){if(this.parameters.screenSizeEnabled){const o=e.vertexAttributes.get(\"offset\"),h={applyToVertex:(e,i,a,n)=>{const c=t(z,o.data[3*n+0],o.data[3*n+1],o.data[3*n+2]),l=t(w,e,i,a);return r(c,c,this.parameters.screenSize*u.camera.computeRenderPixelSizeAt(c)),s(l,l,c),[l[0],l[1],l[2]]},applyToAabb:e=>{const t=a(e,z);return n(e,this.parameters.screenSize*u.camera.computeRenderPixelSizeAt(t))}};b(e,i,u,c,l,h,f)}else b(e,i,u,c,l,void 0,f)}requiresSlot(e,t){if(4===l(t))return 2===e;let r=2;return this.parameters.transparent&&(r=this.parameters.writeDepth?4:7),e===r||20===e}createGLMaterial(e){return 0===e.output||7===e.output||4===e.output?new S(e):null}createBufferWriter(){return new x(this.parameters.screenSizeEnabled)}}class S extends c{updateParameters(e){return this.ensureTechnique(E,e)}beginSlot(e){return this.updateParameters(e)}bind(e,t){t.bindPass(this._material.getPassParameters(),e)}}const C={color:[1,1,1,1],shadingTint:[0,0,0,.25],shadingDirection:e(i(),[.5,-.5,-.5]),transparent:!1,writeDepth:!0,slicePlaneEnabled:!1,cullFace:0,screenSizeEnabled:!1,screenSize:14,shadingEnabled:!0,...f};class x{constructor(e){this.screenSizeEnabled=e;const t=u().vec3f(\"position\").vec3f(\"normal\");this.screenSizeEnabled&&t.vec3f(\"offset\"),this.vertexBufferLayout=t}allocate(e){return this.vertexBufferLayout.createBuffer(e)}elementCount(e){return e.indices.get(\"position\").length}write(e,t,r,s){if(m(t,this.vertexBufferLayout,e.transformation,e.invTranspTransformation,r,s),this.screenSizeEnabled){if(!t.vertexAttributes.has(\"offset\"))throw new Error(\"offset vertex attribute required for screenSizeEnabled ShadedColorMaterial\");{const i=t.vertexAttributes.get(\"offset\"),a=t.indices.get(\"offset\");p(3===i.size);const n=r.getField(\"offset\",o);if(!n)throw new Error(\"unable to acquire view for offset\");d(a,i.data,e.invTranspTransformation,n,s)}}}}const z=i(),w=i();export{q as ShadedColorMaterial};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{isSome as e,isNone as t}from\"../../../core/maybe.js\";import{b as r}from\"../../../chunks/mat4.js\";import{f as n,c as o,m as c,n as a}from\"../../../chunks/vec3.js\";import{f as i}from\"../../../chunks/vec4f64.js\";import{sv3d as s,sm4d as l}from\"../../../geometry/support/vectorStacks.js\";import{hydrateGeometry as m}from\"../../../layers/graphics/hydratedFeatures.js\";import{Manipulator3D as u}from\"./Manipulator3D.js\";import{computeCentroid as p}from\"../layers/graphics/graphicUtils.js\";import g from\"../webgl-engine/lib/GeometryUtil.js\";import{ColorMaterial as f}from\"../webgl-engine/materials/ColorMaterial.js\";import{ShadedColorMaterial as h}from\"../webgl-engine/materials/ShadedColorMaterial.js\";function d(e,t=4,r=!0){const n=i(e[0],e[1],e[2],e.length>3?e[3]:1),o=e[3]<1;return r?new h({color:n,transparent:o,writeDepth:!0,cullFace:2,renderOccluded:t}):new f({color:n,transparent:o,writeDepth:!0,cullFace:2,renderOccluded:t})}function j(e,t=4){const r=i(e[0],e[1],e[2],4===e.length?e[3]:1);return new f({color:r,transparent:!0,writeDepth:!0,cullFace:1,renderOccluded:t})}function w(e,t,r){return new u({view:e,renderObjects:[{geometry:g.createSphereGeometry(1,32,32),material:d(i(t[0],t[1],t[2],null!=r?r:1))}]})}function y(e,t,a,i){const m=n(s.get(),e,a),u=b(m,o(s.get(),i,m),a,l.get());r(u,u);const p=c(s.get(),t,u);return Math.atan2(p[1],p[0])}function b(e,t,r,n){const c=a(s.get(),e),i=a(s.get(),t),l=o(s.get(),c,i);return n[0]=c[0],n[1]=c[1],n[2]=c[2],n[3]=0,n[4]=i[0],n[5]=i[1],n[6]=i[2],n[7]=0,n[8]=l[0],n[9]=l[1],n[10]=l[2],n[11]=0,n[12]=r[0],n[13]=r[1],n[14]=r[2],n[15]=1,n}function O(t,r){const n=t.getViewForGraphic(r);return e(n)&&\"computeAttachmentOrigin\"in n?n.computeAttachmentOrigin(r,t.spatialReference):null}function v(t,r,n){const o=O(t,n);e(o)?r.elevationAlignedLocation=o:F(r,n.geometry)}function F(e,r){if(t(r))return;const n=\"mesh\"===r.type?r.anchor:p(r);t(n)||(e.location=m(n))}export{y as calculateInputRotationTransform,b as calculateTranslateRotateFromBases,d as createManipulatorMaterial,j as createManipulatorOutlineMaterial,w as createSphereManipulator,O as getGraphicAttachmentOrigin,v as placeAtGraphic};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport o from\"../../../../../core/has.js\";import{deg2rad as t}from\"../../../../../core/mathUtils.js\";const r=o(\"mac\")?\"Meta\":\"Control\",s=\"Shift\",a=2,c=1.15,m=1.15,h=1.1,e=2500,i=.02,f=Math.cos(t(45)),p=Math.cos(t(5)),M=.95,j=.3,l=.7,n=[1,.5,0],x=2,C=1,S=[...n,l],U=[0,0,0,.04],b=[...n,.5],d=[...n,1],g=[1,1,1,1],k=[1,.8,.6,1],q=[1,.93,.86,1],u=[...n,1],v=[...n,1],w=3,y=11,z=22.5,A=40,B=48,D=2.25,E=[...n,1],F=4,G=1,H=.3,I=6,J=4,K=12,L=40,N=27,O=1600,P=.4;export{a as DISPLAY_FOCUS_MULTIPLIER,b as GRID_COLOR,i as INITIAL_DEPTH_OFFSET_FRAC,P as INITIAL_PLANE_HALF_SIZE_VIEW_PROPORTION,U as PLANE_BACKGROUND_COLOR,O as PLANE_MIN_BASIS_SCREEN_LEN2,S as PLANE_OUTLINE_COLOR,C as PLANE_OUTLINE_WIDTH,x as PLANE_PREVIEW_OUTLINE_WIDTH,e as POINTER_MOVE_TIMER_MS,M as PREVIEW_FADE_DOT_THRESHOLD,j as PREVIEW_FADE_DURATION_SECONDS,E as RESIZE_HANDLE_COLOR,I as RESIZE_HANDLE_CORNER_INPUT_RADIUS,F as RESIZE_HANDLE_CORNER_WIDTH,J as RESIZE_HANDLE_EDGE_INPUT_RADIUS,H as RESIZE_HANDLE_EDGE_PADDING_FRAC,G as RESIZE_HANDLE_EDGE_WIDTH,d as ROTATE_HEADING_CALLOUT_COLOR,N as ROTATE_HEADING_DISC_RADIUS,h as ROTATE_HEADING_DISC_RADIUS_FOCUS_MULTIPLIER,L as ROTATE_HEADING_OFFSET_DISTANCE,K as ROTATE_HEADING_TIP_LENGTH,k as SHIFT_RESTART_ARROW_CAP_COLOR,B as SHIFT_RESTART_ARROW_LENGTH,D as SHIFT_RESTART_ARROW_OUTLINE_WIDTH,g as SHIFT_RESTART_ARROW_TIP_COLOR,u as SHIFT_RESTART_CALLOUT_COLOR,A as SHIFT_RESTART_OFFSET_DISTANCE,v as SHIFT_RESTART_OUTLINE_COLOR,m as SHIFT_RESTART_TIP_FOCUS_MULTIPLIER,z as SHIFT_RESTART_TIP_LENGTH,y as SHIFT_RESTART_TIP_RADIUS,q as SHIFT_RESTART_TUBE_COLOR,c as SHIFT_RESTART_TUBE_FOCUS_MULTIPLIER,w as SHIFT_RESTART_TUBE_RADIUS,p as SMALL_ANGLE_DOT_THRESHOLD,f as VERTICAL_DOT_THRESHOLD,r as forceHorizontalModifier,s as forceVerticalModifier};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{glsl as d}from\"../views/3d/webgl-engine/core/shaderModules/interfaces.js\";import{ShaderBuilder as e}from\"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js\";function r(){const r=new e;return r.extensions.add(\"GL_OES_standard_derivatives\"),r.vertex.uniforms.add(\"proj\",\"mat4\").add(\"view\",\"mat4\"),r.attributes.add(\"position\",\"vec3\"),r.attributes.add(\"uv0\",\"vec2\"),r.varyings.add(\"vUV\",\"vec2\"),r.vertex.code.add(d`void main(void) {\nvUV = uv0;\ngl_Position = proj * view * vec4(position, 1.0);\n}`),r.fragment.uniforms.add(\"backgroundColor\",\"vec4\").add(\"gridColor\",\"vec4\").add(\"ratio\",\"float\").add(\"gridWidth\",\"float\"),r.fragment.code.add(d`void main() {\nconst float LINE_WIDTH = 1.0;\nvec2 uvScaled = vUV * gridWidth;\nvec2 gridUV = (fract(uvScaled + 0.5) - 0.5) / (LINE_WIDTH * fwidth(uvScaled));\nvec2 grid = (1.0 - step(0.5, gridUV)) * step(-0.5, gridUV);\ngrid.x *= step(0.5, uvScaled.x) * step(uvScaled.x, gridWidth - 0.5);\ngrid.y *= step(0.5, uvScaled.y) * step(uvScaled.y, gridWidth - 0.5);\nfloat gridFade = max(grid.x, grid.y);\nfloat gridAlpha = gridColor.a * gridFade;\ngl_FragColor =\nvec4(backgroundColor.rgb * backgroundColor.a, backgroundColor.a) * (1.0 - gridAlpha) +\nvec4(gridColor.rgb, 1.0) * gridAlpha;\n}`),r}const a=Object.freeze({__proto__:null,build:r});export{a as S,r as b};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{bindProjectionMatrix as r,bindView as e}from\"../core/shaderLibrary/util/View.glsl.js\";import{ReloadableShaderModule as i}from\"../core/shaderTechnique/ReloadableShaderModule.js\";import{ShaderTechnique as o}from\"../core/shaderTechnique/ShaderTechnique.js\";import{Default3D as t}from\"../lib/DefaultVertexAttributeLocations.js\";import{Program as a}from\"../lib/Program.js\";import{S as s}from\"../../../../chunks/SlicePlaneMaterial.glsl.js\";import{makePipelineState as l,separateBlendingParams as n,defaultColorWriteParams as m}from\"../../../webgl/renderState.js\";class d extends o{initializeProgram(r){const e=d.shader.get().build();return new a(r.rctx,e,t)}bindPass(e,i){r(this.program,i.camera.projectionMatrix),this.program.setUniform4fv(\"backgroundColor\",e.backgroundColor),this.program.setUniform4fv(\"gridColor\",e.gridColor),this.program.setUniform1f(\"gridWidth\",e.gridWidth)}bindDraw(r){e(this.program,r),this.program.rebindTextures()}initializePipeline(){return l({blending:n(1,1,771,771),depthTest:{func:513},colorWrite:m})}}d.shader=new i(s,(()=>import(\"./SlicePlaneMaterial.glsl.js\")));export{d as SlicePlaneMaterialTechnique};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{unwrap as r}from\"../../../../core/maybe.js\";import{ShaderTechniqueConfiguration as e}from\"../core/shaderTechnique/ShaderTechniqueConfiguration.js\";import t from\"../lib/GLMaterial.js\";import{Material as i,materialParametersDefaults as n}from\"../lib/Material.js\";import{DefaultBufferWriter as o,PositionUVLayout as s}from\"./internal/DefaultBufferWriter.js\";import{intersectTriangleGeometry as a}from\"./internal/MaterialUtil.js\";import{SlicePlaneMaterialTechnique as u}from\"../shaders/SlicePlaneMaterialTechnique.js\";class l extends i{constructor(r){super(r,m),this._config=new e}intersect(r,e,t,i,n,o,s){return a(r,e,i,n,o,void 0,s)}createBufferWriter(){return new o(s)}requiresSlot(r){return 7===r}createGLMaterial(r){return 0===r.output?new c(r):null}getTechniqueConfig(){return this._config}}class c extends t{constructor(r){super(r),this.ensureTechnique(u,null)}updateParameters(){return r(this.technique)}beginSlot(){return r(this.technique)}bind(r,e){e.bindPass(this._material.parameters,r)}}const m={backgroundColor:[1,0,0,.5],gridColor:[0,1,0,.5],gridWidth:4,...n};export{l as SlicePlaneMaterial};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{isSome as r}from\"../../../../core/maybe.js\";import{c as e}from\"../../../../chunks/vec4.js\";import{f as t}from\"../../../../chunks/vec4f32.js\";import{Object3DVisualElement as i}from\"./Object3DVisualElement.js\";import a from\"../../webgl-engine/lib/GeometryUtil.js\";import{SlicePlaneMaterial as s}from\"../../webgl-engine/materials/SlicePlaneMaterial.js\";class d extends i{constructor(r){super(r),this._material=null,this._renderOccluded=4,this._gridWidth=1,this._gridColor=t(1,0,0,1),this._backgroundColor=t(1,0,0,1),this.applyProps(r)}get renderOccluded(){return this._renderOccluded}set renderOccluded(r){r!==this._renderOccluded&&(this._renderOccluded=r,this._updateMaterial())}get gridWidth(){return this._gridWidth}set gridWidth(r){this._gridWidth!==r&&(this._gridWidth=r,this._updateMaterial())}get gridColor(){return this._gridColor}set gridColor(r){e(this._gridColor,r),this._updateMaterial()}get backgroundColor(){return this._backgroundColor}set backgroundColor(r){e(this._backgroundColor,r),this._updateMaterial()}createExternalResources(){this._material=new s(this.materialParameters)}destroyExternalResources(){this._material=null}forEachExternalMaterial(e){r(this._material)&&e(this._material)}createGeometries(e){if(r(this._material)){const r=a.createSquareGeometry();e.addGeometry(r,this._material)}}get materialParameters(){return{backgroundColor:this._backgroundColor,gridWidth:this._gridWidth,gridColor:this._gridColor,renderOccluded:this._renderOccluded}}_updateMaterial(){r(this._material)&&this._material.setParameters(this.materialParameters)}}export{d as SlicePlaneVisualElement};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../chunks/tslib.es6.js\";import\"../../geometry.js\";import{JSONSupport as o}from\"../../core/JSONSupport.js\";import{clone as e}from\"../../core/lang.js\";import{equalsMaybe as i}from\"../../core/maybe.js\";import{property as r}from\"../../core/accessorSupport/decorators/property.js\";import{cast as s}from\"../../core/accessorSupport/decorators/cast.js\";import{subclass as p}from\"../../core/accessorSupport/decorators/subclass.js\";import{ensureNumber as h}from\"../../core/accessorSupport/ensureType.js\";import{persistable as n}from\"../../core/accessorSupport/decorators/persistable.js\";import{cyclicalDeg as a}from\"../../views/3d/support/mathUtils.js\";import l from\"../../geometry/Point.js\";var m;let c=m=class extends o{constructor(t){super(t),this.type=\"plane\",this.position=null,this.heading=0,this.tilt=0,this.width=10,this.height=10}clone(){return new m({position:e(this.position),heading:this.heading,tilt:this.tilt,width:this.width,height:this.height})}equals(t){return this.heading===t.heading&&this.tilt===t.tilt&&i(this.position,t.position)&&this.width===t.width&&this.height===t.height}};t([r({readOnly:!0,json:{read:!1,write:!0}})],c.prototype,\"type\",void 0),t([r({type:l}),n()],c.prototype,\"position\",void 0),t([r({type:Number,nonNullable:!0,range:{min:0,max:360}}),n(),s((t=>a.normalize(h(t),0,!0)))],c.prototype,\"heading\",void 0),t([r({type:Number,nonNullable:!0,range:{min:0,max:360}}),n(),s((t=>a.normalize(h(t),0,!0)))],c.prototype,\"tilt\",void 0),t([r({type:Number,nonNullable:!0}),n()],c.prototype,\"width\",void 0),t([r({type:Number,nonNullable:!0}),n()],c.prototype,\"height\",void 0),c=m=t([p(\"esri.widgets.Slice.SlicePlane\")],c);const d=c;export{d as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport\"../../../../../geometry.js\";import{neverReached as e}from\"../../../../../core/compilerUtils.js\";import t from\"../../../../../core/Logger.js\";import{rad2deg as i,deg2rad as r}from\"../../../../../core/mathUtils.js\";import{isNone as s,isSome as n,unwrapOr as o}from\"../../../../../core/maybe.js\";import{castRenderScreenPointArray3 as a}from\"../../../../../core/screenUtils.js\";import{r as c,i as l,f as u,m,d,a as p,g}from\"../../../../../chunks/mat4.js\";import{c as f}from\"../../../../../chunks/mat4f64.js\";import{r as b}from\"../../../../../chunks/quat.js\";import{a as h,g as y,d as w,c as j,n as M,b as v,l as k,f as P,p as R,s as x,v as U}from\"../../../../../chunks/vec3.js\";import{a as O,c as S,f as T}from\"../../../../../chunks/vec3f64.js\";import{tryProjectWithZConversion as C}from\"../../../../../geometry/projection.js\";import{r as E,f as L,i as F,c as A,n as z,u as G}from\"../../../../../chunks/boundedPlane.js\";import{fromPositionAndNormal as I,fromVectorsAndPoint as H}from\"../../../../../geometry/support/plane.js\";import{create as D}from\"../../../../../geometry/support/ray.js\";import{angleAroundAxis as B}from\"../../../../../geometry/support/vector.js\";import{sv3d as W,sm4d as V,sq4d as Z}from\"../../../../../geometry/support/vectorStacks.js\";import{Manipulator3D as q}from\"../../Manipulator3D.js\";import{calculateTranslateRotateFromBases as N}from\"../../manipulatorUtils.js\";import{SHIFT_RESTART_TIP_RADIUS as $,RESIZE_HANDLE_EDGE_PADDING_FRAC as J,SMALL_ANGLE_DOT_THRESHOLD as K,PLANE_MIN_BASIS_SCREEN_LEN2 as Q,INITIAL_PLANE_HALF_SIZE_VIEW_PROPORTION as X,SHIFT_RESTART_OFFSET_DISTANCE as Y,SHIFT_RESTART_ARROW_OUTLINE_WIDTH as _,SHIFT_RESTART_ARROW_TIP_COLOR as ee,SHIFT_RESTART_ARROW_CAP_COLOR as te,SHIFT_RESTART_TUBE_COLOR as ie,SHIFT_RESTART_OUTLINE_COLOR as re,SHIFT_RESTART_CALLOUT_COLOR as se,ROTATE_HEADING_OFFSET_DISTANCE as ne,ROTATE_HEADING_DISC_RADIUS as oe,ROTATE_HEADING_CALLOUT_COLOR as ae,PLANE_OUTLINE_COLOR as ce,PLANE_OUTLINE_WIDTH as le,PLANE_BACKGROUND_COLOR as ue,GRID_COLOR as me,RESIZE_HANDLE_CORNER_INPUT_RADIUS as de,RESIZE_HANDLE_EDGE_INPUT_RADIUS as pe,ROTATE_HEADING_TIP_LENGTH as ge,VERTICAL_DOT_THRESHOLD as fe,ROTATE_HEADING_DISC_RADIUS_FOCUS_MULTIPLIER as be,RESIZE_HANDLE_COLOR as he,DISPLAY_FOCUS_MULTIPLIER as ye,RESIZE_HANDLE_EDGE_WIDTH as we,SHIFT_RESTART_ARROW_LENGTH as je,SHIFT_RESTART_TUBE_RADIUS as Me,SHIFT_RESTART_TIP_LENGTH as ve,SHIFT_RESTART_TUBE_FOCUS_MULTIPLIER as ke,SHIFT_RESTART_TIP_FOCUS_MULTIPLIER as Pe,RESIZE_HANDLE_CORNER_WIDTH as Re}from\"./sliceToolConfig.js\";import{LineVisualElement as xe}from\"../../visualElements/LineVisualElement.js\";import{SlicePlaneVisualElement as Ue}from\"../../visualElements/SlicePlaneVisualElement.js\";import{getElevationAtPoint as Oe}from\"../../../support/ElevationProvider.js\";import{RenderCoordsHelper as Se}from\"../../../support/RenderCoordsHelper.js\";import{fromRender as Te}from\"../../../support/geometryUtils/ray.js\";import{Geometry as Ce}from\"../../../webgl-engine/lib/Geometry.js\";import Ee from\"../../../webgl-engine/lib/GeometryUtil.js\";import{ColorMaterial as Le}from\"../../../webgl-engine/materials/ColorMaterial.js\";import{ImageMaterial as Fe}from\"../../../webgl-engine/materials/ImageMaterial.js\";import{NativeLineMaterial as Ae}from\"../../../webgl-engine/materials/NativeLineMaterial.js\";import{RibbonLineMaterial as ze}from\"../../../webgl-engine/materials/RibbonLineMaterial.js\";import Ge from\"../../../../../widgets/Slice/SlicePlane.js\";import Ie from\"../../../../../geometry/Extent.js\";const He=t.getLogger(\"esri.views.3d.interactive.analysisTools.slice.sliceToolUtils\");function De(e,t,i,r,s,n,o,a){return Be(t,o.worldUpAtPosition(e,W.get()),s,n,a.basis1,a.basis2),h(a.basis1,a.basis1,i),h(a.basis2,a.basis2,r),y(a.origin,e),H(a.basis2,a.basis1,a.origin,a.plane),a}function Be(e,t,i,r,s,n){const o=w(e,t),a=W.get(),c=W.get();switch(0===r?Math.abs(o)>fe?1:2:r){case 2:{const r=Math.abs(o)<=K?e:i.viewUp;j(a,r,t),y(c,t);break}case 1:j(a,i.viewUp,t),j(c,t,a);break;case 3:{const r=Math.abs(o)<=K?t:i.viewUp;j(a,r,e),j(c,e,a);break}}const l=j(W.get(),a,c);w(l,i.viewForward)>0&&h(c,c,-1),M(s,a),M(n,c)}function We(e,t,i){const r=t.worldUpAtPosition(e.origin,W.get()),s=e.basis1,n=ft(e,r),o=Math.round(n/Rt)*Rt;return E(e,o-n,s,i)}function Ve(e,t,i,r,s,n){const o=y(W.get(),s.origin);v(o,o,h(W.get(),s.basis1,e.direction[0]<0?1:-1)),v(o,o,h(W.get(),s.basis2,e.direction[1]<0?1:-1));const a=k(s.basis1),c=k(s.basis2),l=P(W.get(),i,o),u=P(W.get(),t,o);let m=0,d=0;if(rt(e)){const t=it(s),i=it(n);m=a-.5*e.direction[0]*w(s.basis1,u)/a,d=c-.5*e.direction[1]*w(s.basis2,u)/c;const r=i/t;m*=r,d*=r}const p=m+.5*e.direction[0]*w(s.basis1,l)/a,g=d+.5*e.direction[1]*w(s.basis2,l)/c,f=h(W.get(),s.basis1,p/a),b=h(W.get(),s.basis2,g/c);(p<=0||et(n.origin,f,r)<=Q)&&y(f,n.basis1),(g<=0||et(n.origin,b,r)<=Q)&&y(b,n.basis2);const j=y(W.get(),o);return v(j,j,h(W.get(),f,e.direction[0]<0?-1:1)),v(j,j,h(W.get(),b,e.direction[1]<0?-1:1)),L(j,f,b,n)}function Ze(e,t){return X*Math.min(t.width,t.height)*t.computeRenderPixelSizeAt(e)}function qe(e,t,i,r){const s=j(W.get(),t,i);return j(s,s,t),I(e,s,r)}function Ne(e,t){return N(e.basis1,e.basis2,e.origin,t)}function $e(e,t,i,r){const s=t.worldUpAtPosition(e.origin,W.get()),n=W.get();switch(i){case 1:y(n,s);break;case 2:y(n,e.basis1)}return I(e.origin,n,r)}function Je(e,t,i,r){const s=_e(i,2),n=V.get();c(n,t,s.edge*Math.PI/2);const o=M(W.get(),s.basis);let l=h(W.get(),o,s.direction*r.computeScreenPixelSizeAt(s.position)*Y);v(l,l,s.position);const u=r.projectToRenderScreen(l,a(W.get())),m=Ke(r,u);Te(r,u,Pt),M(Pt.direction,Pt.direction);const d=W.get();!m&&F(i,Pt,d)&&(l=d),n[12]=0,n[13]=0,n[14]=0,e.modelTransform=n,e.renderLocation=O(l),m?e.state|=kt:e.state&=~kt}function Ke(e,t){const[i,r,s,n]=e.viewport,o=Math.min(s,n)/16;let a=!0;return t[0]<i+o?(t[0]=i+o,a=!1):t[0]>i+s-o&&(t[0]=i+s-o,a=!1),t[1]<r+o?(t[1]=r+o,a=!1):t[1]>r+n-o&&(t[1]=r+n-o,a=!1),a}function Qe(e,t,i,r){const s=k(r.basis1),n=k(r.basis2),o=tt(r),a=it(r),d=x(W.get(),0,0,0);v(d,h(W.get(),r.basis1,t.direction[0]),h(W.get(),r.basis2,t.direction[1])),v(d,r.origin,d);let p=0,g=1;if(rt(t))1===t.direction[0]&&-1===t.direction[1]?p=Rt:1===t.direction[0]&&1===t.direction[1]?p=Math.PI:-1===t.direction[0]&&1===t.direction[1]&&(p=3*Math.PI/2),g=a;else{const e=0!==t.direction[0]?1:2;p=1===e?Rt:0,g=(1===e?n:s)-o}const f=l(V.get());c(f,f,p),u(f,f,x(W.get(),g,g,g)),m(f,i,f),f[12]=0,f[13]=0,f[14]=0,e.modelTransform=f,e.renderLocation=d}function Xe(e,t,i,r){const s=r.worldUpAtPosition(i.origin,W.get()),n=_e(i,0),o=l(V.get());c(o,o,n.edge*Math.PI/2),d(o,o,-ft(i,s)),m(o,t,o),o[12]=0,o[13]=0,o[14]=0,e.modelTransform=o,e.renderLocation=n.position}function Ye(e,t,i){const r=_e(i,1),s=l(V.get());c(s,s,r.edge*Math.PI/2),d(s,s,Rt),m(s,t,s),s[12]=0,s[13]=0,s[14]=0,e.modelTransform=s,e.renderLocation=r.position}function _e(e,t){switch(t){case 0:return{basis:e.basis1,direction:1,position:v(W.get(),e.origin,e.basis1),edge:t};case 1:return{basis:e.basis2,direction:1,position:v(W.get(),e.origin,e.basis2),edge:t};case 2:return{basis:e.basis1,direction:-1,position:P(W.get(),e.origin,e.basis1),edge:t};case 3:return{basis:e.basis2,direction:-1,position:P(W.get(),e.origin,e.basis2),edge:t}}}function et(e,t,i){const r=i.projectToRenderScreen(v(W.get(),e,t),a(W.get())),s=i.projectToRenderScreen(P(W.get(),e,t),a(W.get()));return R(P(r,r,s))}function tt(e){const t=k(e.basis1),i=k(e.basis2);return J*Math.min(t,i)}function it(e){return tt(e)}function rt(e){return 0!==e.direction[0]&&0!==e.direction[1]}function st(e,t=1){const i=0===t?Y:0,r=[T(i,0,-je/2),T(i,0,je/2)],s=mt(r,!0),n=(e,t)=>lt(r,r,{tubeRadius:Me,tipRadius:$,tipLength:ve,tubeFocusMultiplier:ke,tipFocusMultiplier:Pe,padding:e,bothEnds:!0,flat:null,focusTipLength:!0,addCap:t}),o=n(0,!1),a=n(_,!0),c=new Le({color:ee,cullFace:2,renderOccluded:16}),l=new Le({color:te,cullFace:2,renderOccluded:16}),u=new Le({color:ie,cullFace:2,renderOccluded:16}),m=new Le({color:re,transparent:!0,writeDepth:!1,cullFace:1,renderOccluded:2}),d=Ee.createPolylineGeometry([[i,0,0],[i-Y,0,0]]),p=Ee.createPolylineGeometry([[i,0,0],[i-Y,0,0]]),g=new Ae({color:se,renderOccluded:4});return new q({view:e,renderObjects:[...o.normal.map((({part:e,geometry:t,transform:i})=>({geometry:t,material:\"tip\"===e?c:\"cap\"===e?l:u,transform:i,stateMask:1|vt}))),...a.normal.map((({geometry:e,transform:t})=>({geometry:e,material:m,transform:t,stateMask:1|vt}))),{geometry:d,material:g,stateMask:1|vt|kt},...o.focused.map((({part:e,geometry:t,transform:i})=>({geometry:t,material:\"tip\"===e?c:\"cap\"===e?l:u,transform:i,stateMask:2|vt}))),...a.focused.map((({geometry:e,transform:t})=>({geometry:e,material:m,transform:t,stateMask:2|vt}))),{geometry:p,material:g,stateMask:2|vt|kt}],autoScaleRenderObjects:!1,collisionType:{type:\"line\",paths:[s]},collisionPriority:1,radius:$,state:vt})}function nt(e,t){const i=new Fe({transparent:!0,writeDepth:!1,textureId:t.id,renderOccluded:16}),r=ne,s=oe,n=s*be,o=e=>{const t=new Uint32Array([0,1,2,2,3,0]);return new Ce([[\"position\",{size:3,data:[r-e,-e,0,r+e,-e,0,r+e,e,0,r-e,e,0],exclusive:!0}],[\"uv0\",{size:2,data:[0,0,1,0,1,1,0,1]}]],[[\"position\",t],[\"uv0\",t]])},a=Ee.createPolylineGeometry([[0,0,0],[r-s,0,0]]),c=Ee.createPolylineGeometry([[0,0,0],[r-n,0,0]]),l=new Ae({color:ae,renderOccluded:4}),u=[{geometry:o(s),material:i,stateMask:1|vt},{geometry:a,material:l,stateMask:1|vt},{geometry:o(n),material:i,stateMask:2|vt},{geometry:c,material:l,stateMask:2|vt}];return new q({view:e,renderObjects:u,autoScaleRenderObjects:!1,collisionType:{type:\"disc\",direction:[0,0,1],offset:[r,0,0]},collisionPriority:1,radius:s/2,state:vt})}function ot(e){return new xe({view:e,attached:!0,color:ce,width:le,writeDepthEnabled:!1,renderOccluded:4,geometry:[[[-1,-1,0],[1,-1,0],[1,1,0],[-1,1,0],[-1,-1,0]]]})}function at(e){return new Ue({view:e,attached:!0,backgroundColor:[...ue],gridColor:me,gridWidth:4,renderOccluded:4})}function ct(e,t){const i=rt(t),r=i?[T(1,0,0),T(0,0,0),T(0,1,0)]:[T(1,0,0),T(-1,0,0)],s=Ee.createPolylineGeometry(r),n=he,o=e=>new ze({color:n,width:e,renderOccluded:4}),a=()=>new Ae({color:n,renderOccluded:4}),c=i?Re:we,l=c*ye,u=we,m=e=>e>1?o(e):a(),d=[{geometry:s,material:m(c),stateMask:1|xt},{geometry:s,material:m(l),stateMask:2|xt},{geometry:s,material:m(u),stateMask:Ut}],p=new q({view:e,renderObjects:d,collisionType:{type:\"line\",paths:[r]},autoScaleRenderObjects:!1,worldSized:!0,radius:i?de:pe});return p.state=xt,p}function lt(e,t,i){const r=r=>{const s=(r?t:e).slice(0),o=P(W.get(),s[0],s[1]);M(o,o);const a=P(W.get(),s[s.length-1],s[s.length-2]);if(M(a,a),i.padding>0){const e=h(S(),a,-i.padding);if(s[s.length-1]=v(e,e,s[s.length-1]),i.bothEnds){const e=h(S(),o,-i.padding);s[0]=v(e,e,s[0])}}const c=r?i.tipFocusMultiplier:1,d=i.tipLength*(i.focusTipLength?c:1),y=i.tipRadius*c,w=l(V.get());if(i.padding>0){const e=d/4,t=x(W.get(),0,e,0),r=1+i.padding/e;p(w,w,t),u(w,w,x(W.get(),r,r,r)),p(w,w,h(t,t,-1/r))}const j=l(f()),k=T(0,1,0),R=g(f(),b(Z.get(),k,a));R[12]=s[s.length-1][0],R[13]=s[s.length-1][1],R[14]=s[s.length-1][2],m(R,R,w);const U=[{part:\"tube\",geometry:ut(i.tubeRadius*(r?i.tubeFocusMultiplier:1)+i.padding,i.flat,s),transform:j}];let O,C;if(n(i.flat)?O=Ee.createExtrudedTriangle(d,y,y,i.flat.thickness):(O=Ee.createConeGeometry(d,y,24,!1,!1,!0),C=Ee.createConeGeometry(d,y,24,!1,!0,!1)),U.push({part:\"tip\",geometry:O,transform:R}),C&&U.push({part:\"cap\",geometry:C,transform:R}),i.bothEnds){const e=g(f(),b(Z.get(),k,o));e[12]=s[0][0],e[13]=s[0][1],e[14]=s[0][2],m(e,e,w),U.push({part:\"tip\",geometry:O,transform:e}),C&&U.push({part:\"cap\",geometry:C,transform:e})}return U};return{normal:r(!1),focused:r(!0)}}function ut(e,t,i){const r=[];if(n(t))r.push([e,t.thickness/2],[-e,t.thickness/2],[-e,-t.thickness/2],[e,-t.thickness/2]);else{const t=12;for(let i=0;i<t;i++){const s=i/t*2*Math.PI;r.push([Math.cos(s)*e,Math.sin(s)*e])}}return Ee.createPathExtrusionGeometry(r,i,[],[],!1)}function mt(e,t){const i=P(S(),e[e.length-1],e[e.length-2]);if(M(i,i),h(i,i,ge),v(i,i,e[e.length-1]),t){const t=P(S(),e[0],e[1]);return M(t,t),h(t,t,ge),v(t,t,e[0]),[t,...e,i]}return[...e,i]}function dt(e,t,r,n=new Ge){if(s(e))return null;const{renderCoordsHelper:o}=t,a=o.fromRenderCoords(e.origin,t.spatialReference);if(s(a))return null;const c=C(a,r);if(s(c))return null;n.position=c;const l=o.worldUpAtPosition(e.origin,W.get()),u=o.worldBasisAtPosition(e.origin,1,W.get()),m=2*k(e.basis1),d=2*k(e.basis2),p=Se.renderUnitScaleFactor(t.spatialReference,r);return n.width=m*p,n.height=d*p,n.tilt=i(ft(e,l)),n.heading=i(bt(e,l,u)),n}function pt(e,t,i){if(s(e)||s(e.position))return null;const{spatialReference:r}=e.position,o=gt(wt(e,{renderCoordsHelper:t,spatialReference:r},i),t,r);return!e.position.hasZ&&n(o)&&(o.zmin=null,o.zmax=null),o}function gt(e,t,i){if(s(e))return null;const r=e.origin,n=W.get(),o=W.get(),a=W.get(),c=W.get();let l,u,m,d,p,g;v(n,r,e.basis1),v(n,n,e.basis2),v(o,r,e.basis1),U(o,o,e.basis2),U(a,r,e.basis1),U(a,a,e.basis2),U(c,r,e.basis1),v(c,c,e.basis2);for(const f of[n,o,a,c]){const e=t.fromRenderCoords(f,f,i);if(s(e))return null;l=null==l?e[0]:Math.min(l,e[0]),u=null==u?e[0]:Math.max(u,e[0]),m=null==m?e[1]:Math.min(m,e[1]),d=null==d?e[1]:Math.max(d,e[1]),p=null==p?e[2]:Math.min(p,e[2]),g=null==g?e[2]:Math.max(g,e[2])}return new Ie({xmin:l,xmax:u,ymin:m,ymax:d,zmin:p,zmax:g,spatialReference:i})}function ft(e,t){return B(t,e.basis2,e.basis1)+Rt}function bt(e,t,i){return B(e.basis1,i,t)-Rt}function ht(e,t,i,s,n,o,a=A()){return o.toRenderCoords(e,a.origin)?(o.worldBasisAtPosition(a.origin,0,a.basis1),o.worldBasisAtPosition(a.origin,1,a.basis2),H(a.basis2,a.basis1,a.origin,a.plane),E(a,-r(t),z(a),a),E(a,r(i),a.basis1,a),h(a.basis1,a.basis1,s/2),h(a.basis2,a.basis2,n/2),G(a),a):(He.error(`Failed to project slice plane position, projection from ${e.spatialReference.wkid} is not supported`),null)}function yt(e,t){if(s(e)||s(e.position))return null;const i=C(e.position,t);if(s(i))return null;const r=Se.renderUnitScaleFactor(e.position.spatialReference,t),n=e.width*r,o=e.height*r;return{position:i,heading:e.heading,tilt:e.tilt,renderWidth:n,renderHeight:o}}function wt(e,t,i,r=A()){const n=yt(e,t.spatialReference);return s(n)?null:jt(n,t,i,r)}function jt(e,t,i,r=A()){if(s(e))return null;let a=e.position;!e.position.hasZ&&n(t.elevationProvider)&&(a=e.position.clone(),a.z=o(Oe(t.elevationProvider,e.position),0));const c=ht(a,e.heading,e.tilt,e.renderWidth,e.renderHeight,t.renderCoordsHelper,r);return!i.tiltEnabled&&n(c)&&We(c,t.renderCoordsHelper,c),c}function Mt(t){switch(t.type){case\"analysis\":case\"building-scene\":case\"csv\":case\"feature\":case\"geo-rss\":case\"geojson\":case\"graphics\":case\"group\":case\"integrated-mesh\":case\"kml\":case\"map-notes\":case\"ogc-feature\":case\"point-cloud\":case\"route\":case\"scene\":case\"stream\":case\"voxel\":case\"subtype-group\":case\"unknown\":case\"unsupported\":case\"wfs\":case null:return!1;case\"base-dynamic\":case\"base-elevation\":case\"base-tile\":case\"bing-maps\":case\"elevation\":case\"imagery\":case\"imagery-tile\":case\"map-image\":case\"open-street-map\":case\"tile\":case\"vector-tile\":case\"wcs\":case\"web-tile\":case\"wms\":case\"wmts\":return!0;default:return e(t.type),!1}}const vt=16,kt=32,Pt=D(),Rt=Math.PI/2,xt=16,Ut=32;function Ot(e){const t=\"building-scene-3d\"===e.type?e:null;return n(t)}export{vt as DidPointerMoveRecentlyFlag,kt as IsShiftEdgeOnScreenFlag,mt as addArrowTips,Ne as calculateBoundedPlaneTranslateRotate,it as calculateDiagonalResizeHandleScale,Ze as calculatePlaneHalfSize,tt as calculateResizeHandlePadding,et as calculateScreenSpaceBasisLength2,lt as createArrowGeometry,at as createGridVisualElement,ot as createOutlineVisualElement,De as createPlane,ct as createResizeManipulator,nt as createRotateManipulator,$e as createRotatePlane,st as createShiftManipulator,qe as createShiftPlane,We as forceHorizontalOrVertical,Mt as isAlwaysDrapedLayer,rt as isDiagonalResizeHandle,Ot as isIBuildingSceneLayerView3D,Be as normalToBases,gt as planeToExtent,dt as planeToShape,yt as projectShape,jt as projectedShapeToPlane,xt as resizeNormal,Ut as resizeOutlineOnly,Ve as resizePlane,pt as shapeToExtent,wt as shapeToPlane,Qe as updateResizeHandle,Xe as updateRotateHeadingHandle,Ye as updateRotateTiltHandle,Je as updateShiftRestartHandle};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import i from\"../../../../core/Accessor.js\";import t from\"../../../../core/Handles.js\";import s from\"../../../../core/Logger.js\";import{isSome as a,isNone as l}from\"../../../../core/maybe.js\";import{reactTruthy as n,react as r}from\"../../../../core/reactiveUtils.js\";import{whenOnce as o}from\"../../../../core/watchUtils.js\";import{property as c}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as d}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{c as h}from\"../../../../chunks/boundedPlane.js\";import y from\"../../../../layers/Layer.js\";import u from\"../../../../layers/buildingSublayers/BuildingComponentSublayer.js\";import{logFailedGeometryProjectionError as p}from\"../support/loggerUtils.js\";import{isAlwaysDrapedLayer as w,isIBuildingSceneLayerView3D as v,projectShape as f,projectedShapeToPlane as m,planeToShape as _}from\"../../interactive/analysisTools/slice/sliceToolUtils.js\";import V from\"../../../../widgets/Slice/SlicePlane.js\";const g=s.getLogger(\"esri.views.3d.analysis.Slice.SliceController\");let S=class extends i{constructor(e){super(e),this._handles=new t,this._internalChange=!1,this._currentSlicePlane=null,this.state=\"pending\"}get ready(){return\"ready\"===this.state}initialize(){this._handles.add(this.analysis.excludedLayers.on(\"before-add\",(e=>{const i=e.item;null!=i&&(i instanceof y||i instanceof u)?i instanceof y&&w(i)?(g.error(\"excludedLayers\",`Layer '${i.title}, id:${i.id}' of type '${i.type}' can not be individually excluded from slicing. Use 'excludeGroundSurface' instead.`),e.preventDefault()):this.analysis.excludedLayers.includes(i)&&e.preventDefault():(g.error(\"excludedLayers\",\"Invalid layer type, layer must derive from Layer or BuildingComponentSublayer\"),e.preventDefault())}))),this._handles.add(n((()=>this.view.ready&&a(this.view.renderCoordsHelper)),(()=>this._initialize()),{sync:!0,initial:!0,once:!0}))}_initialize(){\"destroyed\"!==this.state&&\"ready\"!==this.state&&(L(this.view,this),this._handles.add([r((()=>this.analysisView.analysisViewData.plane),(()=>{this._internalChange||this._updateSlicePlaneFromBoundedPlane(),this._updateLayerViews()}),{sync:!0}),r((()=>this.analysis.excludeGroundSurface),(()=>this._updateLayerViews()),{sync:!0}),this.analysis.excludedLayers.on(\"change\",(()=>this._updateLayerViews())),r((()=>[this.analysisView.active,this.analysisView.visible]),(()=>{this._updateActiveController(),this._updateViewSlicePlane()}),{sync:!0}),r((()=>this._allLayerAndSubLayerViews),(()=>this._updateLayerViews()))]),this._handles.add([r((()=>this.analysis.shape),(()=>{this._internalChange||(this._updateBoundedPlaneFromSlicePlane(),this._updateViewSlicePlane())}),{sync:!0})],\"analysis\"),this._set(\"state\",\"ready\"),this._updateActiveController(),this._updateBoundedPlaneFromSlicePlane(),this._updateViewSlicePlane())}destroy(){\"destroyed\"!==this.state&&\"pending\"!==this.state&&(this.analysisView.active=!1,x(this.view,this),this._handles.destroy(),this.view.slicePlane=null,this.set(\"view\",null),this._set(\"state\",\"destroyed\"))}async whenReady(){return await o(this,\"ready\"),this}get _allLayerAndSubLayerViews(){const e=this.view.allLayerViews.items;return e.concat(e.filter(v).flatMap((({sublayerViews:e})=>e.items)))}_updateBoundedPlaneFromSlicePlane(){const e=this.analysis.shape,i=this._currentSlicePlane;if(l(i)&&l(e)||a(i)&&a(e)&&e.equals(i))return;let t=null,s=null;if(a(e)&&a(e.position)){const i=e.position.spatialReference,n=f(e,this.view.spatialReference);l(n)&&p(this.analysis,i,g),t=m(n,this.view,{tiltEnabled:this.analysis.tiltEnabled},h()),a(t)&&(s={heading:e.heading,tilt:e.tilt,position:e.position,width:e.width,height:e.height})}this._currentSlicePlane=s,this._internalChange=!0,this.analysisView.analysisViewData.plane=t,this._internalChange=!1}_updateSlicePlaneFromBoundedPlane(){const e=this.analysisView.analysisViewData.plane,i=_(e,this.view,this.view.spatialReference,new V);let t=null;a(i)&&(t={heading:i.heading,tilt:i.tilt,position:i.position,width:i.width,height:i.height}),this._currentSlicePlane=t,this._internalChange=!0,this.analysis.shape=i,this._internalChange=!1,this._updateViewSlicePlane()}_updateActiveController(){if(C)return;const e=j(this.view);if(this.analysisView.active)a(e.activeController)&&e.activeController!==this?(C=!0,e.activeController.analysisView.active=!1,C=!1):a(e.activeController)&&e.activeController,this._updateLayerViews(),e.activeController=this;else{if(a(e.activeController)&&e.activeController!==this)return;a(e.activeController)&&e.activeController===this&&(e.activeController=null,this._updateLayerViews())}}_updateViewSlicePlane(){\"ready\"===this.state&&P(this.view)}_updateLayerViews(){const e=a(this.analysisView.analysisViewData.plane)&&this.analysisView.visible&&this.analysisView.active,i=[],t=e=>{\"layers\"in e?e.layers.forEach(t):i.push(e)};this.analysis.excludedLayers.forEach(t),this.view.allLayerViews.forEach((t=>{t.destroyed||(\"slicePlaneEnabled\"in t&&(t.slicePlaneEnabled=e&&i.indexOf(t.layer)<0),\"sublayerViews\"in t&&t.sublayerViews.forEach((t=>{t.slicePlaneEnabled=e&&i.indexOf(t.sublayer)<0})))})),null!=this.view.basemapTerrain&&(this.view.basemapTerrain.slicePlaneEnabled=e&&!this.analysis.excludeGroundSurface)}};e([c({readOnly:!0})],S.prototype,\"state\",void 0),e([c()],S.prototype,\"view\",void 0),e([c()],S.prototype,\"analysis\",void 0),e([c()],S.prototype,\"analysisView\",void 0),e([c()],S.prototype,\"ready\",null),e([c()],S.prototype,\"_allLayerAndSubLayerViews\",null),S=e([d(\"esri.views.3d.analysis.Slice.SliceController\")],S);const b=new Map;let C=!1;function P(e){const i=j(e).activeController;a(i)&&a(i.analysisView.analysisViewData.plane)&&i.analysisView.visible?e.slicePlane=i.analysisView.analysisViewData.plane:e.slicePlane=null}function L(e,i){b.has(e)||b.set(e,{all:[],activeController:null}),b.get(e).all.push(i)}function j(e){return b.get(e)}function x(e,i){if(!b.has(e))throw new Error(\"view expected in global slice register\");const t=b.get(e),s=t.all.lastIndexOf(i);if(-1===s)throw new Error(\"controller expected in global slice register\");t.all.splice(s,1),0===t.all.length&&b.delete(e)}export{S as SliceController};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../../chunks/tslib.es6.js\";import s from\"../../../../core/Accessor.js\";import{property as o}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as e}from\"../../../../core/accessorSupport/decorators/subclass.js\";let t=class extends s{constructor(){super(...arguments),this.plane=null}};r([o()],t.prototype,\"plane\",void 0),t=r([e(\"esri.views.3d.analysis.Slice.SliceViewData\")],t);export{t as SliceViewData};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../../chunks/tslib.es6.js\";import i from\"../../../../core/Accessor.js\";import e from\"../../../../core/Handles.js\";import{isNone as s,isSome as r,destroyMaybe as a}from\"../../../../core/maybe.js\";import{react as o,syncAndInitial as l}from\"../../../../core/reactiveUtils.js\";import{whenOnce as n}from\"../../../../core/watchUtils.js\";import{property as d}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as h}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{w as p,m}from\"../../../../chunks/mat4.js\";import{s as c,l as u}from\"../../../../chunks/vec3.js\";import{sv3d as y,sm4d as _}from\"../../../../geometry/support/vectorStacks.js\";import{PLANE_OUTLINE_COLOR as v,PLANE_OUTLINE_WIDTH as w,PLANE_PREVIEW_OUTLINE_WIDTH as V,PLANE_BACKGROUND_COLOR as f,GRID_COLOR as g}from\"../../interactive/analysisTools/slice/sliceToolConfig.js\";import{createGridVisualElement as b,createOutlineVisualElement as j,calculateBoundedPlaneTranslateRotate as E}from\"../../interactive/analysisTools/slice/sliceToolUtils.js\";import{createStipplePatternSimple as S}from\"../../webgl-engine/materials/lineStippleUtils.js\";let k=class extends i{constructor(t){super(t),this._handles=new e,this._gridVisualElement=null,this._outlineVisualElement=null,this.state=\"pending\",this.showGrid=!1,this.editable=!0}get ready(){return\"ready\"===this.state}initialize(){this._initialize()}async _initialize(){if(\"destroyed\"===this.state||\"ready\"===this.state)return;await n(this.view,\"ready\",!0);const t=this.analysisView.analysisViewData;if(s(t))throw new Error(\"expected internal object to be valid\");this._gridVisualElement=b(this.view),this._outlineVisualElement=j(this.view),this._handles.add([o((()=>({visible:r(t.plane)&&this.analysisView.visible,active:this.analysisView.active,editable:this.editable,showGrid:this.showGrid})),(t=>this._updateMaterials(t)),l),o((()=>t.plane),(t=>this._updatePlane(t)),l)],\"internal\"),this._set(\"state\",\"ready\")}destroy(){\"destroyed\"!==this.state&&\"pending\"!==this.state&&(this._handles.destroy(),this._gridVisualElement=a(this._gridVisualElement),this._outlineVisualElement=a(this._outlineVisualElement),this.set(\"view\",null),this._set(\"state\",\"destroyed\"))}async whenReady(){return await n(this,\"ready\"),this}_updatePlane(t){if(s(t))return;const i=c(y.get(),u(t.basis1),u(t.basis2),1),e=p(_.get(),i),r=E(t,_.get()),a=m(e,r,e);this._outlineVisualElement.transform=a,this._gridVisualElement.transform=a}_updateMaterials({visible:t,active:i,editable:e,showGrid:s}){this._outlineVisualElement.color=v,this._outlineVisualElement.width=e?w:V,this._outlineVisualElement.stipplePattern=i?null:S(5);const r=s?g:[0,0,0,0];this._gridVisualElement.backgroundColor=f,this._gridVisualElement.gridColor=r,this._gridVisualElement.visible=t,this._outlineVisualElement.visible=t}};t([d({readOnly:!0})],k.prototype,\"state\",void 0),t([d()],k.prototype,\"view\",void 0),t([d()],k.prototype,\"analysis\",void 0),t([d()],k.prototype,\"analysisView\",void 0),t([d()],k.prototype,\"ready\",null),t([d()],k.prototype,\"showGrid\",void 0),t([d()],k.prototype,\"editable\",void 0),k=t([h(\"esri.views.3d.analysis.Slice.SliceVisualization\")],k);export{k as SliceVisualization};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as i}from\"../../../../chunks/tslib.es6.js\";import s from\"../../../../core/Accessor.js\";import{destroyMaybe as a}from\"../../../../core/maybe.js\";import{property as t}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as o}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{AnalysisView3D as e}from\"../AnalysisView3D.js\";import{SliceController as r}from\"./SliceController.js\";import{SliceViewData as l}from\"./SliceViewData.js\";import{SliceVisualization as n}from\"./SliceVisualization.js\";let y=class extends(e(s)){constructor(i){super(i),this.type=\"slice-view\",this.analysisVisualization=null,this.analysisController=null,this.analysisViewData=new l,this.active=!0,this.showGrid=!1,this.editable=!1}initialize(){this.analysisVisualization=new n({view:this.view,analysis:this.analysis,analysisView:this}),this.analysisController=new r({view:this.view,analysis:this.analysis,analysisView:this})}destroy(){this.analysisVisualization=a(this.analysisVisualization),this.analysisController=a(this.analysisController)}async when(){return await this.analysisVisualization.whenReady(),await this.analysisController.whenReady(),this}get testData(){return{visualization:this.analysisVisualization,controller:this.analysisController}}};i([t()],y.prototype,\"type\",void 0),i([t()],y.prototype,\"analysis\",void 0),i([t()],y.prototype,\"analysisViewData\",void 0),i([t()],y.prototype,\"active\",void 0),i([t({aliasOf:\"analysisVisualization.showGrid\"})],y.prototype,\"showGrid\",void 0),i([t({aliasOf:\"analysisVisualization.editable\"})],y.prototype,\"editable\",void 0),y=i([o(\"esri.views.3d.analysis.Slice.SliceView3D\")],y);const p=y;export{p as default};\n"],"names":["M","G","W","X","e","s","o","r","l","n","i","a","d","c","t","p","S","b","P","v","h","m","y","T","u","E","g","f","j","x","C","N","xe","ce","le","Ue","ue","me","Ge","k","Se","B","A","H","z","Oe","D","w","_","V"],"mappings":"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"}